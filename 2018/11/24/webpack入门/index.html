<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Hulk Lv"><title>webpack入门 · Hulk Lv' Blog</title><meta name="description" content="该文主要以实操为主，关于模块化、webpack特性等介绍可以参考webpack学习这篇，或者查看官网、其他文章，本文基于webpack 4.26.0。

什么是webpack
再提一句，webpack是一个给js打包的工具，可以将很多模块打包成静态文件，可以进行代码分割，可以使得项目在加载过程中只加"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">Hulk Lv' Blog</a></h3></div></div><ul class="social-links"></ul><div class="footer"><a href="https://github.com/xiaojiaolv131">GitHub </a><a href="http://weibo.com/u/1172318487"> WeiBo </a></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/about">关于</a></li><li><a href="/archives">归档</a></li><li><a href="/links">友链</a></li></div><div class="information"><div class="back_btn"><li><a onclick="window.history.go(-1)" class="fa fa-chevron-left"> </a></li></div><div class="avatar"><img></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>webpack入门</a></h3></div><div class="post-content"><blockquote>
<p>该文主要以实操为主，关于模块化、webpack特性等介绍可以参考<a href="https://xiaojiaolv131.github.io/2017/06/22/webpack%E5%AD%A6%E4%B9%A0/" target="_blank" rel="external">webpack学习</a>这篇，或者查看官网、其他文章，本文基于<code>webpack 4.26.0</code>。</p>
</blockquote>
<h1 id="什么是webpack"><a href="#什么是webpack" class="headerlink" title="什么是webpack"></a>什么是webpack</h1><blockquote>
<p>再提一句，webpack是一个给js打包的工具，可以将很多模块打包成静态文件，可以进行代码分割，可以使得项目在加载过程中只加载当前需要的文件，模块可以通过loader来处理各种各样的文件，不管是CommonJs、AMD、ES6都可以进行处理，还可以处理图片、CSS、JSON、CopyScript文件，或者自定义文件，例如.vue、.jsx文件都可以处理。</p>
</blockquote>
<h1 id="从零开始"><a href="#从零开始" class="headerlink" title="从零开始"></a>从零开始</h1><h2 id="安装并开始一个项目"><a href="#安装并开始一个项目" class="headerlink" title="安装并开始一个项目"></a>安装并开始一个项目</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ mkdir webpack_demo1</div><div class="line">$ <span class="built_in">cd</span> webpack_demo1</div><div class="line">$ npm init</div><div class="line">$ npm install webpack --save-dev</div></pre></td></tr></table></figure>
<p><code>npm init</code>初始化之后将自动生成一个<code>package.json</code>文件，如下：<br><img src="/imgs/webpack/1.jpg" alt="Alt text"><br><br>然后，通过<code>npm install</code>对<code>webpack</code>进行安装<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install webpack --save-dev // -D, --save-dev: Package will appear <span class="keyword">in</span> your devDependencies</div></pre></td></tr></table></figure></p>
<p>成功安装<code>webpack</code>之后，目录和<code>package.json</code>如下：<br><img src="/imgs/webpack/2.jpg" alt="Alt text"><br></p>
<h2 id="玩一个简单的打包"><a href="#玩一个简单的打包" class="headerlink" title="玩一个简单的打包"></a>玩一个简单的打包</h2><h3 id="打包一个js"><a href="#打包一个js" class="headerlink" title="打包一个js"></a>打包一个js</h3><p>比如，我们新建一个main.js文件，如下<br><img src="/imgs/webpack/3.jpg" alt="Alt text"><br><br>接下来，我们直接运行webpack命令<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ webpack main.js</div></pre></td></tr></table></figure></p>
<p>输入如下，它要求我们必须安装<code>webpack cli</code>webpack命令行工具，ok，我们选yes，将自动执行<code>npm install -D webpack-cli</code>来安装。<br><img src="/imgs/webpack/4.png" alt="Alt text"><br><br>而且，还继续执行了<code>webpack main.js</code>打包操作，可以看到一些输出信息，但是有个黄字的warning信息，要求我们指定打包模式，可以再命令行中通过<code>--mode=devalopment/production</code>来指定打包模式，如下<br><img src="/imgs/webpack/5.png" alt="Alt text"><br><br><img src="/imgs/webpack/6.png" alt="Alt text"><br></p>
<blockquote>
<p>ok，这样就不再警告了。首先，说下输出的信息:</p>
</blockquote>
<table>
<thead>
<tr>
<th>名称</th>
<th>描述</th>
</tr>
</thead>
<tbody>
<tr>
<td>Hash</td>
<td>本次打包的哈希值</td>
</tr>
<tr>
<td>Version</td>
<td>webpack版本号</td>
</tr>
<tr>
<td>Time</td>
<td>打包用时</td>
</tr>
<tr>
<td>Built At</td>
<td>打包时间</td>
</tr>
<tr>
<td>Asset</td>
<td>打包生成的静态文件</td>
</tr>
<tr>
<td>Chunks</td>
<td>分块编号</td>
</tr>
<tr>
<td>Chunk Names</td>
<td>块名称</td>
</tr>
<tr>
<td>Entrypoint</td>
<td>入口</td>
</tr>
<tr>
<td>Size</td>
<td>静态文件大小</td>
</tr>
</tbody>
</table>
<p>表格下面的信息，就是块的说明信息。本次打包在目录下自动生成了dist目录，如下<br><img src="/imgs/webpack/6.jpg" alt="Alt text"><br><br>当我们不指定打包模式的时候，webpack默认使用<code>production</code>生成环境下打包，那么生成的打包文件是上面的样子，那么我们在生成环境下打包出来的文件是什么样子呢？如下<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/******/</span> (<span class="function"><span class="keyword">function</span>(<span class="params">modules</span>) </span>&#123; <span class="comment">// webpackBootstrap</span></div><div class="line"><span class="comment">/******/</span>    <span class="comment">// 缓存所有模块”输出“的内容</span></div><div class="line"><span class="comment">/******/</span>    <span class="keyword">var</span> installedModules = &#123;&#125;;</div><div class="line"><span class="comment">/******/</span></div><div class="line"><span class="comment">/******/</span>    <span class="comment">// The require function</span></div><div class="line"><span class="comment">/******/</span>    <span class="function"><span class="keyword">function</span> <span class="title">__webpack_require__</span>(<span class="params">moduleId</span>) </span>&#123;</div><div class="line"><span class="comment">/******/</span></div><div class="line"><span class="comment">/******/</span>        <span class="comment">/*</span></div><div class="line">                 *检查缓存中是否有该模块，如果有则返回该模块的export</div><div class="line">                 *如果没有，则执行下面的步骤：运行该模块，并将模块的”输出“放置在缓存中 </div><div class="line">                 */</div><div class="line"><span class="comment">/******/</span>        <span class="keyword">if</span>(installedModules[moduleId]) &#123;</div><div class="line"><span class="comment">/******/</span>            <span class="keyword">return</span> installedModules[moduleId].exports;</div><div class="line"><span class="comment">/******/</span>        &#125;</div><div class="line"><span class="comment">/******/</span>        <span class="comment">// 创建一个新的模块</span></div><div class="line"><span class="comment">/******/</span>        <span class="keyword">var</span> <span class="built_in">module</span> = installedModules[moduleId] = &#123;</div><div class="line"><span class="comment">/******/</span>            i: moduleId, <span class="comment">// 模块的id</span></div><div class="line"><span class="comment">/******/</span>            l: <span class="literal">false</span>, <span class="comment">// 模块的”输出“是否加载到缓存中</span></div><div class="line"><span class="comment">/******/</span>            exports: &#123;&#125; <span class="comment">// 模块的”输出“</span></div><div class="line"><span class="comment">/******/</span>        &#125;;</div><div class="line"><span class="comment">/******/</span></div><div class="line"><span class="comment">/******/</span>        <span class="comment">// 执行对应的模块，并将模块的”输出“绑定到module.exports上</span></div><div class="line"><span class="comment">/******/</span>        modules[moduleId].call(<span class="built_in">module</span>.exports, <span class="built_in">module</span>, <span class="built_in">module</span>.exports, __webpack_require__);</div><div class="line"><span class="comment">/******/</span></div><div class="line"><span class="comment">/******/</span>        <span class="comment">// 修改是否加载的标识</span></div><div class="line"><span class="comment">/******/</span>        <span class="built_in">module</span>.l = <span class="literal">true</span>;</div><div class="line"><span class="comment">/******/</span></div><div class="line"><span class="comment">/******/</span>        <span class="comment">// 返回模块的”输出“</span></div><div class="line"><span class="comment">/******/</span>        <span class="keyword">return</span> <span class="built_in">module</span>.exports;</div><div class="line"><span class="comment">/******/</span>    &#125;</div><div class="line"><span class="comment">/******/</span></div><div class="line"><span class="comment">/******/</span></div><div class="line"><span class="comment">/******/</span>    <span class="comment">// 所有的模块</span></div><div class="line"><span class="comment">/******/</span>    __webpack_require__.m = modules;</div><div class="line"><span class="comment">/******/</span></div><div class="line"><span class="comment">/******/</span>    <span class="comment">// 所有被缓存的模块</span></div><div class="line"><span class="comment">/******/</span>    __webpack_require__.c = installedModules;</div><div class="line"><span class="comment">/******/</span></div><div class="line"><span class="comment">/******/</span>    <span class="comment">// 定义一个getter方法</span></div><div class="line"><span class="comment">/******/</span>    __webpack_require__.d = <span class="function"><span class="keyword">function</span>(<span class="params">exports, name, getter</span>) </span>&#123;</div><div class="line">                <span class="comment">// 如果一个对象没有name对应的属性，则在该对象上定义该属性</span></div><div class="line"><span class="comment">/******/</span>        <span class="keyword">if</span>(!__webpack_require__.o(exports, name)) &#123;</div><div class="line"><span class="comment">/******/</span>            <span class="built_in">Object</span>.defineProperty(exports, name, &#123; <span class="attr">enumerable</span>: <span class="literal">true</span>, <span class="attr">get</span>: getter &#125;);</div><div class="line"><span class="comment">/******/</span>        &#125;</div><div class="line"><span class="comment">/******/</span>    &#125;;</div><div class="line"><span class="comment">/******/</span></div><div class="line"><span class="comment">/******/</span>    <span class="comment">// define __esModule on exports</span></div><div class="line"><span class="comment">/******/</span>    __webpack_require__.r = <span class="function"><span class="keyword">function</span>(<span class="params">exports</span>) </span>&#123;</div><div class="line"><span class="comment">/******/</span>        <span class="keyword">if</span>(<span class="keyword">typeof</span> <span class="built_in">Symbol</span> !== <span class="string">'undefined'</span> &amp;&amp; <span class="built_in">Symbol</span>.toStringTag) &#123;</div><div class="line"><span class="comment">/******/</span>            <span class="built_in">Object</span>.defineProperty(exports, <span class="built_in">Symbol</span>.toStringTag, &#123; <span class="attr">value</span>: <span class="string">'Module'</span> &#125;);</div><div class="line"><span class="comment">/******/</span>        &#125;</div><div class="line"><span class="comment">/******/</span>        <span class="built_in">Object</span>.defineProperty(exports, <span class="string">'__esModule'</span>, &#123; <span class="attr">value</span>: <span class="literal">true</span> &#125;);</div><div class="line"><span class="comment">/******/</span>    &#125;;</div><div class="line"><span class="comment">/******/</span></div><div class="line"><span class="comment">/******/</span>    <span class="comment">// create a fake namespace object</span></div><div class="line"><span class="comment">/******/</span>    <span class="comment">// mode &amp; 1: value is a module id, require it</span></div><div class="line"><span class="comment">/******/</span>    <span class="comment">// mode &amp; 2: merge all properties of value into the ns</span></div><div class="line"><span class="comment">/******/</span>    <span class="comment">// mode &amp; 4: return value when already ns object</span></div><div class="line"><span class="comment">/******/</span>    <span class="comment">// mode &amp; 8|1: behave like require</span></div><div class="line"><span class="comment">/******/</span>    __webpack_require__.t = <span class="function"><span class="keyword">function</span>(<span class="params">value, mode</span>) </span>&#123;</div><div class="line"><span class="comment">/******/</span>        <span class="keyword">if</span>(mode &amp; <span class="number">1</span>) value = __webpack_require__(value);</div><div class="line"><span class="comment">/******/</span>        <span class="keyword">if</span>(mode &amp; <span class="number">8</span>) <span class="keyword">return</span> value;</div><div class="line"><span class="comment">/******/</span>        <span class="keyword">if</span>((mode &amp; <span class="number">4</span>) &amp;&amp; <span class="keyword">typeof</span> value === <span class="string">'object'</span> &amp;&amp; value &amp;&amp; value.__esModule) <span class="keyword">return</span> value;</div><div class="line"><span class="comment">/******/</span>        <span class="keyword">var</span> ns = <span class="built_in">Object</span>.create(<span class="literal">null</span>);</div><div class="line"><span class="comment">/******/</span>        __webpack_require__.r(ns);</div><div class="line"><span class="comment">/******/</span>        <span class="built_in">Object</span>.defineProperty(ns, <span class="string">'default'</span>, &#123; <span class="attr">enumerable</span>: <span class="literal">true</span>, <span class="attr">value</span>: value &#125;);</div><div class="line"><span class="comment">/******/</span>        <span class="keyword">if</span>(mode &amp; <span class="number">2</span> &amp;&amp; <span class="keyword">typeof</span> value != <span class="string">'string'</span>) <span class="keyword">for</span>(<span class="keyword">var</span> key <span class="keyword">in</span> value) __webpack_require__.d(ns, key, <span class="function"><span class="keyword">function</span>(<span class="params">key</span>) </span>&#123; <span class="keyword">return</span> value[key]; &#125;.bind(<span class="literal">null</span>, key));</div><div class="line"><span class="comment">/******/</span>        <span class="keyword">return</span> ns;</div><div class="line"><span class="comment">/******/</span>    &#125;;</div><div class="line"><span class="comment">/******/</span></div><div class="line"><span class="comment">/******/</span>    <span class="comment">// getDefaultExport function for compatibility with non-harmony modules</span></div><div class="line"><span class="comment">/******/</span>    __webpack_require__.n = <span class="function"><span class="keyword">function</span>(<span class="params">module</span>) </span>&#123;</div><div class="line"><span class="comment">/******/</span>        <span class="keyword">var</span> getter = <span class="built_in">module</span> &amp;&amp; <span class="built_in">module</span>.__esModule ?</div><div class="line"><span class="comment">/******/</span>            <span class="function"><span class="keyword">function</span> <span class="title">getDefault</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="built_in">module</span>[<span class="string">'default'</span>]; &#125; :</div><div class="line"><span class="comment">/******/</span>            <span class="function"><span class="keyword">function</span> <span class="title">getModuleExports</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span> <span class="built_in">module</span>; &#125;;</div><div class="line"><span class="comment">/******/</span>        __webpack_require__.d(getter, <span class="string">'a'</span>, getter);</div><div class="line"><span class="comment">/******/</span>        <span class="keyword">return</span> getter;</div><div class="line"><span class="comment">/******/</span>    &#125;;</div><div class="line"><span class="comment">/******/</span></div><div class="line"><span class="comment">/******/</span>    <span class="comment">// 定义一个方法：判断一个对象是否有某一属性</span></div><div class="line"><span class="comment">/******/</span>    __webpack_require__.o = <span class="function"><span class="keyword">function</span>(<span class="params">object, property</span>) </span>&#123; <span class="keyword">return</span> <span class="built_in">Object</span>.prototype.hasOwnProperty.call(object, property); &#125;;</div><div class="line"><span class="comment">/******/</span></div><div class="line"><span class="comment">/******/</span>    <span class="comment">// __webpack_public_path__</span></div><div class="line"><span class="comment">/******/</span>    __webpack_require__.p = <span class="string">""</span>;</div><div class="line"><span class="comment">/******/</span></div><div class="line"><span class="comment">/******/</span></div><div class="line"><span class="comment">/******/</span>    <span class="comment">// 从main.js模块开始加载（执行）</span></div><div class="line"><span class="comment">/******/</span>    <span class="keyword">return</span> __webpack_require__(__webpack_require__.s = <span class="string">"./main.js"</span>);</div><div class="line"><span class="comment">/******/</span> &#125;) <span class="comment">// 匿名函数定义结束</span></div><div class="line"><span class="comment">/************************************************************************/</span></div><div class="line"><span class="comment">/******/</span> (&#123;</div><div class="line"></div><div class="line"><span class="comment">/***/</span> <span class="string">"./main.js"</span>: <span class="comment">// 起始模块</span></div><div class="line"><span class="comment">/*!*****************!*\</span></div><div class="line">  !*** ./main.js ***!</div><div class="line">  \*****************/</div><div class="line"><span class="comment">/*! no static exports found */</span></div><div class="line"><span class="comment">/***/</span> (<span class="function"><span class="keyword">function</span>(<span class="params">module, exports</span>) </span>&#123;</div><div class="line"></div><div class="line"><span class="built_in">eval</span>(<span class="string">"function sayHi() &#123;\n    alert('Hi Hulk Lv!');\n&#125;\n\n//# sourceURL=webpack:///./main.js?"</span>);</div><div class="line"></div><div class="line"><span class="comment">/***/</span> &#125;)</div><div class="line"></div><div class="line"><span class="comment">/******/</span> &#125;);</div></pre></td></tr></table></figure></p>
<p>我们可以很清晰的看到，打包结果是一个立即执行函数表达式，其中包含<code>webpack</code>需要的内置函数和<code>main.js</code>的函数。那么，依赖的文件是怎么打包的呢？我们下面新建一个文件<code>hello.js</code>。</p>
<h3 id="打包依赖js"><a href="#打包依赖js" class="headerlink" title="打包依赖js"></a>打包依赖js</h3><p><img src="/imgs/webpack/7.jpg" alt="Alt text"><br><br>然后，在<code>main.js</code>里面使用CommonJS的方式引用它。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>(<span class="string">'./hello.js'</span>);</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    alert(<span class="string">'Hi Hulk Lv!'</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>再次进行打包，如下<br><img src="/imgs/webpack/8.png" alt="Alt text"><br><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/************************************************************************/</span></div><div class="line"><span class="comment">/******/</span> (&#123;</div><div class="line"></div><div class="line"><span class="comment">/***/</span> <span class="string">"./hello.js"</span>:</div><div class="line"><span class="comment">/*!******************!*\</span></div><div class="line">  !*** ./hello.js ***!</div><div class="line">  \******************/</div><div class="line"><span class="comment">/*! no static exports found */</span></div><div class="line"><span class="comment">/***/</span> (<span class="function"><span class="keyword">function</span>(<span class="params">module, exports</span>) </span>&#123;</div><div class="line"></div><div class="line"><span class="built_in">eval</span>(<span class="string">"function sayHello() &#123;\n    alert('Hello Hulk Lv!');\n&#125;\n\n//# sourceURL=webpack:///./hello.js?"</span>);</div><div class="line"></div><div class="line"><span class="comment">/***/</span> &#125;),</div><div class="line"></div><div class="line"><span class="comment">/***/</span> <span class="string">"./main.js"</span>:</div><div class="line"><span class="comment">/*!*****************!*\</span></div><div class="line">  !*** ./main.js ***!</div><div class="line">  \*****************/</div><div class="line"><span class="comment">/*! no static exports found */</span></div><div class="line"><span class="comment">/***/</span> (<span class="function"><span class="keyword">function</span>(<span class="params">module, exports, __webpack_require__</span>) </span>&#123;</div><div class="line"></div><div class="line"><span class="built_in">eval</span>(<span class="string">"__webpack_require__(/*! ./hello.js */ \"./hello.js\");    \n\nfunction sayHi() &#123;\n    alert('Hi Hulk Lv!');\n&#125;\n\n//# sourceURL=webpack:///./main.js?"</span>);</div><div class="line"></div><div class="line"><span class="comment">/***/</span> &#125;)</div><div class="line"></div><div class="line"><span class="comment">/******/</span> &#125;);</div><div class="line">看下打包好的文件如上图，可以看到在<span class="string">`main.js`</span>部分，通过<span class="string">`__webpack_require__`</span>方法去加载了<span class="string">`hello.js`</span>文件。</div></pre></td></tr></table></figure></p>
<h3 id="指定打包文件名和打包路径"><a href="#指定打包文件名和打包路径" class="headerlink" title="指定打包文件名和打包路径"></a>指定打包文件名和打包路径</h3><p>目前，我们打包后的文件与入口文件同名，那么如果想指定其他名字呢？我们可以使用<code>--output-filename</code>。<br><img src="/imgs/webpack/9.png" alt="Alt text"><br><br>这样在<code>dist</code>目录下就生成了名称为<code>bundle.js</code>的文件。一般打包文件都是放在根目录的<code>dist</code>文件夹下，如果想放在其他目录下，可以使用<code>--output-path</code>来设置，比如:<br><img src="/imgs/webpack/10.png" alt="Alt text"><br><br>再看下目录，已经在更目录的<code>abc/</code>文件夹下生成打包好的文件了。<br><img src="/imgs/webpack/11.png" alt="Alt text"><br></p>
<h3 id="打包css"><a href="#打包css" class="headerlink" title="打包css"></a>打包css</h3><p>前端工程里面少不了样式文件，接下来，我们新建一个css文件，并引用它看看。<br><img src="/imgs/webpack/12.png" alt="Alt text"><br><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>(<span class="string">'./hello.js'</span>);</div><div class="line"><span class="built_in">require</span>(<span class="string">'./main.css'</span>);</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    alert(<span class="string">'Hi Hulk Lv!'</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ok，我们继续打包<br><img src="/imgs/webpack/13.png" alt="Alt text"><br><br>报错了！<code>webpack</code>提示我们需要一个适当的<code>loader</code>去处理css类型的文件，这里就需要<code>css-loader</code>了，那么我们同样使用<code>npm install</code>来安装。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ npm install css-loader --save-dev</div></pre></td></tr></table></figure></p>
<p>安装成功之后，我们继续打包<br><img src="/imgs/webpack/14.png" alt="Alt text"><br><br>诶？怎么还是报错。。。，我们虽然安装了<code>css-loader</code>，但是我们并没有告诉<code>webpack</code>处理css文件的时候使用<code>css-loader</code>，那就指定一下呗<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>(<span class="string">'./hello.js'</span>);</div><div class="line"><span class="built_in">require</span>(<span class="string">'css-loader!./main.css'</span>); <span class="comment">// 指定相应的loader</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    alert(<span class="string">'Hi Hulk Lv!'</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>然后，我们再打包<br><img src="/imgs/webpack/15.png" alt="Alt text"><br><br>这时候我们打包成功了，我们看一下打包后的<code>bundle.js</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/************************************************************************/</span></div><div class="line"><span class="comment">/******/</span> (&#123;</div><div class="line"></div><div class="line"><span class="comment">/***/</span> <span class="string">"./hello.js"</span>:</div><div class="line"><span class="comment">/*!******************!*\</span></div><div class="line">  !*** ./hello.js ***!</div><div class="line">  \******************/</div><div class="line"><span class="comment">/*! no static exports found */</span></div><div class="line"><span class="comment">/***/</span> (<span class="function"><span class="keyword">function</span>(<span class="params">module, exports</span>) </span>&#123;</div><div class="line"></div><div class="line"><span class="built_in">eval</span>(<span class="string">"function sayHello() &#123;\n    alert('Hello Hulk Lv!');\n&#125;\n\n//# sourceURL=webpack:///./hello.js?"</span>);</div><div class="line"></div><div class="line"><span class="comment">/***/</span> &#125;),</div><div class="line"></div><div class="line"><span class="comment">/***/</span> <span class="string">"./main.js"</span>:</div><div class="line"><span class="comment">/*!*****************!*\</span></div><div class="line">  !*** ./main.js ***!</div><div class="line">  \*****************/</div><div class="line"><span class="comment">/*! no static exports found */</span></div><div class="line"><span class="comment">/***/</span> (<span class="function"><span class="keyword">function</span>(<span class="params">module, exports, __webpack_require__</span>) </span>&#123;</div><div class="line"></div><div class="line"><span class="built_in">eval</span>(<span class="string">"__webpack_require__(/*! ./hello.js */ \"./hello.js\");\n__webpack_require__(/*! css-loader!./main.css */ \"./node_modules/css-loader/index.js!./main.css\");\n\nfunction sayHi() &#123;\n    alert('Hi Hulk Lv!');\n&#125;\n\n//# sourceURL=webpack:///./main.js?"</span>);</div><div class="line"></div><div class="line"><span class="comment">/***/</span> &#125;),</div><div class="line"></div><div class="line"><span class="comment">/***/</span> <span class="string">"./node_modules/css-loader/index.js!./main.css"</span>:</div><div class="line"><span class="comment">/*!********************************************!*\</span></div><div class="line">  !*** ./node_modules/css-loader!./main.css ***!</div><div class="line">  \********************************************/</div><div class="line"><span class="comment">/*! no static exports found */</span></div><div class="line"><span class="comment">/***/</span> (<span class="function"><span class="keyword">function</span>(<span class="params">module, exports, __webpack_require__</span>) </span>&#123;</div><div class="line"></div><div class="line"><span class="built_in">eval</span>(<span class="string">"exports = module.exports = __webpack_require__(/*! ./node_modules/css-loader/lib/css-base.js */ \"./node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.i, \"html, body &#123;\\n    padding: 0;\\n    margin: 0;\\n&#125;\\n\\nbody &#123;\\n    background-color: red;\\n&#125;\", \"\"]);\n\n// exports\n\n\n//# sourceURL=webpack:///./main.css?./node_modules/css-loader"</span>);</div><div class="line"></div><div class="line"><span class="comment">/***/</span> &#125;),</div><div class="line"></div><div class="line"><span class="comment">/***/</span> <span class="string">"./node_modules/css-loader/lib/css-base.js"</span>:</div><div class="line"><span class="comment">/*!*************************************************!*\</span></div><div class="line">  !*** ./node_modules/css-loader/lib/css-base.js ***!</div><div class="line">  \*************************************************/</div><div class="line"><span class="comment">/*! no static exports found */</span></div><div class="line"><span class="comment">/***/</span> (<span class="function"><span class="keyword">function</span>(<span class="params">module, exports</span>) </span>&#123;</div><div class="line"></div><div class="line"><span class="built_in">eval</span>(<span class="string">"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) &#123;\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() &#123;\n\t\treturn this.map(function (item) &#123;\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) &#123;\n\t\t\t\treturn \"@media \" + item[2] + \"&#123;\" + content + \"&#125;\";\n\t\t\t&#125; else &#123;\n\t\t\t\treturn content;\n\t\t\t&#125;\n\t\t&#125;).join(\"\");\n\t&#125;;\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) &#123;\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = &#123;&#125;;\n\t\tfor(var i = 0; i &lt; this.length; i++) &#123;\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t&#125;\n\t\tfor(i = 0; i &lt; modules.length; i++) &#123;\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) &#123;\n\t\t\t\tif(mediaQuery &amp;&amp; !item[2]) &#123;\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t&#125; else if(mediaQuery) &#123;\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t&#125;\n\t\t\t\tlist.push(item);\n\t\t\t&#125;\n\t\t&#125;\n\t&#125;;\n\treturn list;\n&#125;;\n\nfunction cssWithMappingToString(item, useSourceMap) &#123;\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) &#123;\n\t\treturn content;\n\t&#125;\n\n\tif (useSourceMap &amp;&amp; typeof btoa === 'function') &#123;\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) &#123;\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t&#125;);\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t&#125;\n\n\treturn [content].join('\\n');\n&#125;\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) &#123;\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n&#125;\n\n\n//# sourceURL=webpack:///./node_modules/css-loader/lib/css-base.js?"</span>);</div><div class="line"></div><div class="line"><span class="comment">/***/</span> &#125;)</div><div class="line"></div><div class="line"><span class="comment">/******/</span> &#125;);</div></pre></td></tr></table></figure></p>
<p>可以看到，打包后的<code>bundle.js</code>的下面注入了<code>css-loader</code>和<code>main.css</code>相关的代码，并在<code>main.css</code>处理前使用<code>css-loader</code>来处理css。</p>
<h3 id="插入css"><a href="#插入css" class="headerlink" title="插入css"></a>插入css</h3><p>为了验证一下，我们打包后的文件的有效性，我们新建一个<code>index.html</code>文件，并在里面引用打包好的js文件。<br><img src="/imgs/webpack/16_2.png" alt="Alt text"><br><br><img src="/imgs/webpack/16.png" alt="Alt text"><br><br>直接在浏览器打开<code>index.html</code>文件，看到js文件我们已经引入，但是样式貌似并没有生效，这是为什么呢？虽然我么使用<code>webpack</code>打包处理了css文件，也在js文件中引入了css文件，但以上做的只是把css文件打包进<code>bundle.js</code>里面，但是我们的html并没有引入样式，这里就需要提到<code>style-loader</code>了，同样，我们通过<code>npm install</code>安装一下，然后指定<code>style-loader</code>去处理css样式文件。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">require</span>(<span class="string">'./hello.js'</span>);</div><div class="line"><span class="built_in">require</span>(<span class="string">'style-loader!css-loader!./main.css'</span>);</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHi</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    alert(<span class="string">'Hi Hulk Lv!'</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line">sayHi(); <span class="comment">// 调用sayHi</span></div></pre></td></tr></table></figure></p>
<p>接着，我们再打包试试<br><img src="/imgs/webpack/17.png" alt="Alt text"><br><br>ok，打开打包后的<code>bundle.js</code>看一下又增加了哪些代码：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/************************************************************************/</span></div><div class="line"><span class="comment">/******/</span> (&#123;</div><div class="line"></div><div class="line"><span class="comment">/***/</span> <span class="string">"./hello.js"</span>:</div><div class="line"><span class="comment">/*!******************!*\</span></div><div class="line">  !*** ./hello.js ***!</div><div class="line">  \******************/</div><div class="line"><span class="comment">/*! no static exports found */</span></div><div class="line"><span class="comment">/***/</span> (<span class="function"><span class="keyword">function</span>(<span class="params">module, exports</span>) </span>&#123;</div><div class="line"></div><div class="line"><span class="built_in">eval</span>(<span class="string">"function sayHello() &#123;\n    alert('Hello Hulk Lv!');\n&#125;\n\n//# sourceURL=webpack:///./hello.js?"</span>);</div><div class="line"></div><div class="line"><span class="comment">/***/</span> &#125;),</div><div class="line"></div><div class="line"><span class="comment">/***/</span> <span class="string">"./main.js"</span>:</div><div class="line"><span class="comment">/*!*****************!*\</span></div><div class="line">  !*** ./main.js ***!</div><div class="line">  \*****************/</div><div class="line"><span class="comment">/*! no static exports found */</span></div><div class="line"><span class="comment">/***/</span> (<span class="function"><span class="keyword">function</span>(<span class="params">module, exports, __webpack_require__</span>) </span>&#123;</div><div class="line"></div><div class="line"><span class="built_in">eval</span>(<span class="string">"__webpack_require__(/*! ./hello.js */ \"./hello.js\");\n__webpack_require__(/*! style-loader!css-loader!./main.css */ \"./node_modules/style-loader/index.js!./node_modules/css-loader/index.js!./main.css\");\n\nfunction sayHi() &#123;\n    alert('Hi Hulk Lv!');\n&#125;\n\n//# sourceURL=webpack:///./main.js?"</span>);</div><div class="line"></div><div class="line"><span class="comment">/***/</span> &#125;),</div><div class="line"></div><div class="line"><span class="comment">/***/</span> <span class="string">"./node_modules/css-loader/index.js!./main.css"</span>:</div><div class="line"><span class="comment">/*!********************************************!*\</span></div><div class="line">  !*** ./node_modules/css-loader!./main.css ***!</div><div class="line">  \********************************************/</div><div class="line"><span class="comment">/*! no static exports found */</span></div><div class="line"><span class="comment">/***/</span> (<span class="function"><span class="keyword">function</span>(<span class="params">module, exports, __webpack_require__</span>) </span>&#123;</div><div class="line"></div><div class="line"><span class="built_in">eval</span>(<span class="string">"exports = module.exports = __webpack_require__(/*! ./node_modules/css-loader/lib/css-base.js */ \"./node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.i, \"html, body &#123;\\n    padding: 0;\\n    margin: 0;\\n&#125;\\n\\nbody &#123;\\n    background-color: red;\\n&#125;\", \"\"]);\n\n// exports\n\n\n//# sourceURL=webpack:///./main.css?./node_modules/css-loader"</span>);</div><div class="line"></div><div class="line"><span class="comment">/***/</span> &#125;),</div><div class="line"></div><div class="line"><span class="comment">/***/</span> <span class="string">"./node_modules/css-loader/lib/css-base.js"</span>:</div><div class="line"><span class="comment">/*!*************************************************!*\</span></div><div class="line">  !*** ./node_modules/css-loader/lib/css-base.js ***!</div><div class="line">  \*************************************************/</div><div class="line"><span class="comment">/*! no static exports found */</span></div><div class="line"><span class="comment">/***/</span> (<span class="function"><span class="keyword">function</span>(<span class="params">module, exports</span>) </span>&#123;</div><div class="line"></div><div class="line"><span class="built_in">eval</span>(<span class="string">"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) &#123;\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() &#123;\n\t\treturn this.map(function (item) &#123;\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) &#123;\n\t\t\t\treturn \"@media \" + item[2] + \"&#123;\" + content + \"&#125;\";\n\t\t\t&#125; else &#123;\n\t\t\t\treturn content;\n\t\t\t&#125;\n\t\t&#125;).join(\"\");\n\t&#125;;\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) &#123;\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = &#123;&#125;;\n\t\tfor(var i = 0; i &lt; this.length; i++) &#123;\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t&#125;\n\t\tfor(i = 0; i &lt; modules.length; i++) &#123;\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) &#123;\n\t\t\t\tif(mediaQuery &amp;&amp; !item[2]) &#123;\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t&#125; else if(mediaQuery) &#123;\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t&#125;\n\t\t\t\tlist.push(item);\n\t\t\t&#125;\n\t\t&#125;\n\t&#125;;\n\treturn list;\n&#125;;\n\nfunction cssWithMappingToString(item, useSourceMap) &#123;\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) &#123;\n\t\treturn content;\n\t&#125;\n\n\tif (useSourceMap &amp;&amp; typeof btoa === 'function') &#123;\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) &#123;\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t&#125;);\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t&#125;\n\n\treturn [content].join('\\n');\n&#125;\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) &#123;\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n&#125;\n\n\n//# sourceURL=webpack:///./node_modules/css-loader/lib/css-base.js?"</span>);</div><div class="line"></div><div class="line"><span class="comment">/***/</span> &#125;),</div><div class="line"></div><div class="line"><span class="comment">/***/</span> <span class="string">"./node_modules/style-loader/index.js!./node_modules/css-loader/index.js!./main.css"</span>:</div><div class="line"><span class="comment">/*!************************************************************************!*\</span></div><div class="line">  !*** ./node_modules/style-loader!./node_modules/css-loader!./main.css ***!</div><div class="line">  \************************************************************************/</div><div class="line"><span class="comment">/*! no static exports found */</span></div><div class="line"><span class="comment">/***/</span> (<span class="function"><span class="keyword">function</span>(<span class="params">module, exports, __webpack_require__</span>) </span>&#123;</div><div class="line"></div><div class="line"><span class="built_in">eval</span>(<span class="string">"\nvar content = __webpack_require__(/*! !./node_modules/css-loader!./main.css */ \"./node_modules/css-loader/index.js!./main.css\");\n\nif(typeof content === 'string') content = [[module.i, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = &#123;\"hmr\":true&#125;\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = __webpack_require__(/*! ./node_modules/style-loader/lib/addStyles.js */ \"./node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(false) &#123;&#125;\n\n//# sourceURL=webpack:///./main.css?./node_modules/style-loader!./node_modules/css-loader"</span>);</div><div class="line"></div><div class="line"><span class="comment">/***/</span> &#125;),</div><div class="line"></div><div class="line"><span class="comment">/***/</span> <span class="string">"./node_modules/style-loader/lib/addStyles.js"</span>:</div><div class="line"><span class="comment">/*!****************************************************!*\</span></div><div class="line">  !*** ./node_modules/style-loader/lib/addStyles.js ***!</div><div class="line">  \****************************************************/</div><div class="line"><span class="comment">/*! no static exports found */</span></div><div class="line"><span class="comment">/***/</span> (<span class="function"><span class="keyword">function</span>(<span class="params">module, exports, __webpack_require__</span>) </span>&#123;</div><div class="line"></div><div class="line"><span class="built_in">eval</span>(<span class="string">"/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = &#123;&#125;;\n\nvar\tmemoize = function (fn) &#123;\n\tvar memo;\n\n\treturn function () &#123;\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t&#125;;\n&#125;;\n\nvar isOldIE = memoize(function () &#123;\n\t// Test for IE &lt;= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window &amp;&amp; document &amp;&amp; document.all &amp;&amp; !window.atob;\n&#125;);\n\nvar getTarget = function (target, parent) &#123;\n  if (parent)&#123;\n    return parent.querySelector(target);\n  &#125;\n  return document.querySelector(target);\n&#125;;\n\nvar getElement = (function (fn) &#123;\n\tvar memo = &#123;&#125;;\n\n\treturn function(target, parent) &#123;\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // &#123;\n                //   insertInto: function () &#123; return document.querySelector(\"#foo\").shadowRoot &#125;\n                // &#125;\n                if (typeof target === 'function') &#123;\n                        return target();\n                &#125;\n                if (typeof memo[target] === \"undefined\") &#123;\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement &amp;&amp; styleTarget instanceof window.HTMLIFrameElement) &#123;\n\t\t\t\ttry &#123;\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t&#125; catch(e) &#123;\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t&#125;\n\t\t\t&#125;\n\t\t\tmemo[target] = styleTarget;\n\t\t&#125;\n\t\treturn memo[target]\n\t&#125;;\n&#125;)();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = __webpack_require__(/*! ./urls */ \"./node_modules/style-loader/lib/urls.js\");\n\nmodule.exports = function(list, options) &#123;\n\tif (typeof DEBUG !== \"undefined\" &amp;&amp; DEBUG) &#123;\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t&#125;\n\n\toptions = options || &#123;&#125;;\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : &#123;&#125;;\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of &lt;style&gt;\n\t// tags it will allow on a page\n\tif (!options.singleton &amp;&amp; typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add &lt;style&gt; tags to the &lt;head&gt; element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add &lt;style&gt; tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) &#123;\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i &lt; styles.length; i++) &#123;\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t&#125;\n\n\t\tif(newList) &#123;\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t&#125;\n\n\t\tfor (var i = 0; i &lt; mayRemove.length; i++) &#123;\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) &#123;\n\t\t\t\tfor (var j = 0; j &lt; domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t&#125;\n\t\t&#125;\n\t&#125;;\n&#125;;\n\nfunction addStylesToDom (styles, options) &#123;\n\tfor (var i = 0; i &lt; styles.length; i++) &#123;\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) &#123;\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j &lt; domStyle.parts.length; j++) &#123;\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t&#125;\n\n\t\t\tfor(; j &lt; item.parts.length; j++) &#123;\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t&#125;\n\t\t&#125; else &#123;\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j &lt; item.parts.length; j++) &#123;\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t&#125;\n\n\t\t\tstylesInDom[item.id] = &#123;id: item.id, refs: 1, parts: parts&#125;;\n\t\t&#125;\n\t&#125;\n&#125;\n\nfunction listToStyles (list, options) &#123;\n\tvar styles = [];\n\tvar newStyles = &#123;&#125;;\n\n\tfor (var i = 0; i &lt; list.length; i++) &#123;\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = &#123;css: css, media: media, sourceMap: sourceMap&#125;;\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = &#123;id: id, parts: [part]&#125;);\n\t\telse newStyles[id].parts.push(part);\n\t&#125;\n\n\treturn styles;\n&#125;\n\nfunction insertStyleElement (options, style) &#123;\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) &#123;\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t&#125;\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") &#123;\n\t\tif (!lastStyleElementInsertedAtTop) &#123;\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t&#125; else if (lastStyleElementInsertedAtTop.nextSibling) &#123;\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t&#125; else &#123;\n\t\t\ttarget.appendChild(style);\n\t\t&#125;\n\t\tstylesInsertedAtTop.push(style);\n\t&#125; else if (options.insertAt === \"bottom\") &#123;\n\t\ttarget.appendChild(style);\n\t&#125; else if (typeof options.insertAt === \"object\" &amp;&amp; options.insertAt.before) &#123;\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t&#125; else &#123;\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t&#125;\n&#125;\n\nfunction removeStyleElement (style) &#123;\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx &gt;= 0) &#123;\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t&#125;\n&#125;\n\nfunction createStyleElement (options) &#123;\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) &#123;\n\t\toptions.attrs.type = \"text/css\";\n\t&#125;\n\n\tif(options.attrs.nonce === undefined) &#123;\n\t\tvar nonce = getNonce();\n\t\tif (nonce) &#123;\n\t\t\toptions.attrs.nonce = nonce;\n\t\t&#125;\n\t&#125;\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n&#125;\n\nfunction createLinkElement (options) &#123;\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) &#123;\n\t\toptions.attrs.type = \"text/css\";\n\t&#125;\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n&#125;\n\nfunction addAttrs (el, attrs) &#123;\n\tObject.keys(attrs).forEach(function (key) &#123;\n\t\tel.setAttribute(key, attrs[key]);\n\t&#125;);\n&#125;\n\nfunction getNonce() &#123;\n\tif (false) &#123;&#125;\n\n\treturn __webpack_require__.nc;\n&#125;\n\nfunction addStyle (obj, options) &#123;\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform &amp;&amp; obj.css) &#123;\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) &#123;\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    &#125; else &#123;\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() &#123;\n\t    \t\t// noop\n\t    \t&#125;;\n\t    &#125;\n\t&#125;\n\n\tif (options.singleton) &#123;\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t&#125; else if (\n\t\tobj.sourceMap &amp;&amp;\n\t\ttypeof URL === \"function\" &amp;&amp;\n\t\ttypeof URL.createObjectURL === \"function\" &amp;&amp;\n\t\ttypeof URL.revokeObjectURL === \"function\" &amp;&amp;\n\t\ttypeof Blob === \"function\" &amp;&amp;\n\t\ttypeof btoa === \"function\"\n\t) &#123;\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () &#123;\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t&#125;;\n\t&#125; else &#123;\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () &#123;\n\t\t\tremoveStyleElement(style);\n\t\t&#125;;\n\t&#125;\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) &#123;\n\t\tif (newObj) &#123;\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &amp;&amp;\n\t\t\t\tnewObj.media === obj.media &amp;&amp;\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) &#123;\n\t\t\t\treturn;\n\t\t\t&#125;\n\n\t\t\tupdate(obj = newObj);\n\t\t&#125; else &#123;\n\t\t\tremove();\n\t\t&#125;\n\t&#125;;\n&#125;\n\nvar replaceText = (function () &#123;\n\tvar textStore = [];\n\n\treturn function (index, replacement) &#123;\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t&#125;;\n&#125;)();\n\nfunction applyToSingletonTag (style, index, remove, obj) &#123;\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) &#123;\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t&#125; else &#123;\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) &#123;\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t&#125; else &#123;\n\t\t\tstyle.appendChild(cssNode);\n\t\t&#125;\n\t&#125;\n&#125;\n\nfunction applyToTag (style, obj) &#123;\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) &#123;\n\t\tstyle.setAttribute(\"media\", media)\n\t&#125;\n\n\tif(style.styleSheet) &#123;\n\t\tstyle.styleSheet.cssText = css;\n\t&#125; else &#123;\n\t\twhile(style.firstChild) &#123;\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t&#125;\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t&#125;\n&#125;\n\nfunction updateLink (link, options, obj) &#123;\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined &amp;&amp; sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) &#123;\n\t\tcss = fixUrls(css);\n\t&#125;\n\n\tif (sourceMap) &#123;\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t&#125;\n\n\tvar blob = new Blob([css], &#123; type: \"text/css\" &#125;);\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n&#125;\n\n\n//# sourceURL=webpack:///./node_modules/style-loader/lib/addStyles.js?"</span>);</div><div class="line"></div><div class="line"><span class="comment">/***/</span> &#125;),</div><div class="line"></div><div class="line"><span class="comment">/***/</span> <span class="string">"./node_modules/style-loader/lib/urls.js"</span>:</div><div class="line"><span class="comment">/*!***********************************************!*\</span></div><div class="line">  !*** ./node_modules/style-loader/lib/urls.js ***!</div><div class="line">  \***********************************************/</div><div class="line"><span class="comment">/*! no static exports found */</span></div><div class="line"><span class="comment">/***/</span> (<span class="function"><span class="keyword">function</span>(<span class="params">module, exports</span>) </span>&#123;</div><div class="line"></div><div class="line"><span class="built_in">eval</span>(<span class="string">"\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) &#123;\n  // get current location\n  var location = typeof window !== \"undefined\" &amp;&amp; window.location;\n\n  if (!location) &#123;\n    throw new Error(\"fixUrls requires window.location\");\n  &#125;\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") &#123;\n\t  return css;\n  &#125;\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) &#123;\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1)&#123; return $1; &#125;)\n\t\t\t.replace(/^'(.*)'$/, function(o, $1)&#123; return $1; &#125;);\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) &#123;\n\t\t  return fullMatch;\n\t\t&#125;\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) &#123;\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t&#125; else if (unquotedOrigUrl.indexOf(\"/\") === 0) &#123;\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t&#125; else &#123;\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t&#125;\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t&#125;);\n\n\t// send back the fixed css\n\treturn fixedCss;\n&#125;;\n\n\n//# sourceURL=webpack:///./node_modules/style-loader/lib/urls.js?"</span>);</div><div class="line"></div><div class="line"><span class="comment">/***/</span> &#125;)</div><div class="line"></div><div class="line"><span class="comment">/******/</span> &#125;);</div></pre></td></tr></table></figure></p>
<p>然后，我们再次打开<code>index.html</code>验证一下<br><img src="/imgs/webpack/18_2.png" alt="Alt text"><br><br><img src="/imgs/webpack/18.png" alt="Alt text"><br><br>ok，我们看到css样式已经生效了，在<code>index.html</code>文件里面，添加了<code>&lt;style&gt;</code>标签，并将css样式注入到<code>&lt;style&gt;</code>标签里面。</p>
<blockquote>
<p><code>css-loader</code>主要是来处理css样式文件，<code>style-loader</code>是在<code>css-loader</code>处理之后新建一个<code>&lt;style&gt;</code>标签插入到html文件里面，当html引入了<code>bundle.js</code>文件之后，插入<code>&lt;style&gt;</code>标签的代码就会被执行。<br>那每次引入css文件的时候都要去加入一长串的loader吗？其实我们可以通过命令行工具来指定，要使用<code>--module-bind</code>参数，像这样。<br><img src="/imgs/webpack/19.png" alt="Alt text"><br></p>
</blockquote>
<h3 id="介绍一些命令行参数"><a href="#介绍一些命令行参数" class="headerlink" title="介绍一些命令行参数"></a>介绍一些命令行参数</h3><ul>
<li>–watch：观察文件系统的变化，这样每次修改以后都不需要再手动执行打包命令，会自动打包</li>
<li>–progress：打印出编译进度的百分比值，默认false</li>
<li>–display-modules：在输出中显示所有模块，包括被排除的模块</li>
<li>–display-chunk：在输出中显示 chunks</li>
<li>–display-reasons：显示模块包含在输出中的原因</li>
</ul>
<p><img src="/imgs/webpack/20.png" alt="Alt text"><br></p>
<h2 id="配置文件玩打包"><a href="#配置文件玩打包" class="headerlink" title="配置文件玩打包"></a>配置文件玩打包</h2><h3 id="建立项目的配置文件"><a href="#建立项目的配置文件" class="headerlink" title="建立项目的配置文件"></a>建立项目的配置文件</h3><blockquote>
<p>在上一节，主要写了一个简单的例子走了一下打包的过程，下面我们规范一下工程目录结构，并通过<code>webpack.config.js</code>配置文件来让webpack为我们的工程打包。我们新建一个工程目录<code>webpack_test</code>，目录结构如下。</p>
</blockquote>
<p><img src="/imgs/webpack/21.png" alt="Alt text"><br></p>
<p><code>webpack.config.js</code>配置如图所示，<code>src</code>放源码，<code>script</code>放脚本文件，<code>style</code>放样式文件</p>
<p><code>main.js</code>内容如下：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">hello</span>(<span class="params">str</span>) </span>&#123;</div><div class="line">    alert(str);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>style.css</code>内容如下：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">html</span>, <span class="selector-tag">body</span> &#123;</div><div class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</div><div class="line">    <span class="attribute">margin</span>: <span class="number">0</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="selector-tag">body</span> &#123;</div><div class="line">    <span class="attribute">background-color</span>: red;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><code>index.html</code>内容如下：<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>webpack test<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"./dist/bundle.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>ok，文件都准备好以后，我们直接运行命令<code>webpack</code>来打包。</p>
<p><img src="/imgs/webpack/22.png" alt="Alt text"><br></p>
<p>从错误信息中，我们得知输出路径必须是一个绝对路径，但是在配置里面手写绝对路径太麻烦了，怎么办呢？我们可以使用Node.js提供的<code>__dirname</code>，Node.js 中，<code>__dirname</code>总是指向被执行js文件的绝对路径，相反，<code>./</code>会返回你执行node命令的路径，例如你的工作路径。有一个特殊情况是在 <code>require()</code>中使用<code>./</code>时，这时的路径就会是含有<code>require()</code>的脚本文件的相对路径。因此，我们修改<code>webpack.config.js</code>如下<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">mode</span>: <span class="string">'development'</span>, <span class="comment">// 打包模式</span></div><div class="line">    entry: <span class="string">'./src/script/main.js'</span>, <span class="comment">// 入口</span></div><div class="line">    output: &#123; <span class="comment">// 输出配置</span></div><div class="line">        path: __dirname + <span class="string">"/dist/js"</span>, <span class="comment">// 输出路径</span></div><div class="line">        filename: <span class="string">'bundle.js'</span> <span class="comment">// 输出文件名</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>然后，我们再次执行<code>webpack</code>命令<br><img src="/imgs/webpack/23.png" alt="Alt text"><br><br>ok，打包成功了。在根目录<code>dist/js/</code>下可以看到打包好的js文件<code>bundle.js</code>。在上面引用的配置文件叫做<code>webpack.config.js</code>，这个是webpack默认的配置文件名，其实我们也可以使用其他名字，比如<code>webpack.config.dev.js</code>，然后在命令行打包的时候添加<code>--config</code>参数，像下面这样：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ webpack --config webpack.config.dev.js</div></pre></td></tr></table></figure></p>
<p>嗯，这样就可以通过别的配置文件来打包我们的程序了，但看起来还是有点麻烦，我们可以结合<code>npm</code>的脚本来做到的，打开<code>package.json</code>文件，添加<code>script</code>脚本<br><figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"name"</span>: <span class="string">"webpack_test"</span>,</div><div class="line">  <span class="attr">"version"</span>: <span class="string">"1.0.0"</span>,</div><div class="line">  <span class="attr">"description"</span>: <span class="string">""</span>,</div><div class="line">  <span class="attr">"main"</span>: <span class="string">"index.js"</span>,</div><div class="line">  <span class="attr">"scripts"</span>: &#123;</div><div class="line">    <span class="attr">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span>,</div><div class="line">    <span class="attr">"webpack"</span>: <span class="string">"webpack --config webpack.config.js --progress --display-modules --colors --display-reasons"</span> </div><div class="line">  &#125;,</div><div class="line">  <span class="attr">"repository"</span>: &#123;</div><div class="line">    <span class="attr">"type"</span>: <span class="string">"git"</span>,</div><div class="line">    <span class="attr">"url"</span>: <span class="string">"git+https://github.com/xiaojiaolv131/webpack_test.git"</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">"author"</span>: <span class="string">"hulk lv"</span>,</div><div class="line">  <span class="attr">"license"</span>: <span class="string">"ISC"</span>,</div><div class="line">  <span class="attr">"bugs"</span>: &#123;</div><div class="line">    <span class="attr">"url"</span>: <span class="string">"https://github.com/xiaojiaolv131/webpack_test/issues"</span></div><div class="line">  &#125;,</div><div class="line">  <span class="attr">"homepage"</span>: <span class="string">"https://github.com/xiaojiaolv131/webpack_test#readme"</span>,</div><div class="line">  <span class="attr">"devDependencies"</span>: &#123;</div><div class="line">    <span class="attr">"css-loader"</span>: <span class="string">"^1.0.1"</span>,</div><div class="line">    <span class="attr">"style-loader"</span>: <span class="string">"^0.23.1"</span>,</div><div class="line">    <span class="attr">"webpack"</span>: <span class="string">"^4.26.0"</span>,</div><div class="line">    <span class="attr">"webpack-cli"</span>: <span class="string">"^3.1.2"</span></div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>接着，我们运行<code>npm run webpack</code>命令来打包<br><img src="/imgs/webpack/24.png" alt="Alt text"><br></p>
<h3 id="配置打包入口和输出"><a href="#配置打包入口和输出" class="headerlink" title="配置打包入口和输出"></a>配置打包入口和输出</h3><p>上面讲的都是单入口的打包，那么多入口怎么配置呢？可以在配置文件中通过数组的形式，例如两个平行的不相依赖的文件，但想打包在一起的情况。<br>例如，我们新建一个新的<code>a.js</code>，并在入口配置它。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">a</span>(<span class="params"></span>) </span>&#123;</div><div class="line">    alert(<span class="string">'a'</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>多入口<code>webpack.config.js</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">mode</span>: <span class="string">'development'</span>, <span class="comment">// 打包模式</span></div><div class="line">    entry: [<span class="string">'./src/script/main.js'</span>, <span class="string">'./src/script/a.js'</span>], <span class="comment">// 入口</span></div><div class="line">    output: &#123; <span class="comment">// 输出配置</span></div><div class="line">        path: __dirname + <span class="string">"/dist/js"</span>, <span class="comment">// 输出路径</span></div><div class="line">        filename: <span class="string">'bundle.js'</span> <span class="comment">// 输出文件名</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这时候，我们打包<br><img src="/imgs/webpack/25.png" alt="Alt text"><br><br>ok，打包成功了，看下打包之后的<code>bundle.js</code>。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/************************************************************************/</span></div><div class="line"><span class="comment">/******/</span> (&#123;</div><div class="line"></div><div class="line"><span class="comment">/***/</span> <span class="string">"./src/script/a.js"</span>:</div><div class="line"><span class="comment">/*!*************************!*\</span></div><div class="line">  !*** ./src/script/a.js ***!</div><div class="line">  \*************************/</div><div class="line"><span class="comment">/*! no static exports found */</span></div><div class="line"><span class="comment">/***/</span> (<span class="function"><span class="keyword">function</span>(<span class="params">module, exports</span>) </span>&#123;</div><div class="line"></div><div class="line"><span class="built_in">eval</span>(<span class="string">"function a() &#123;\n    alert('a');\n&#125;\n\n//# sourceURL=webpack:///./src/script/a.js?"</span>);</div><div class="line"></div><div class="line"><span class="comment">/***/</span> &#125;),</div><div class="line"></div><div class="line"><span class="comment">/***/</span> <span class="string">"./src/script/main.js"</span>:</div><div class="line"><span class="comment">/*!****************************!*\</span></div><div class="line">  !*** ./src/script/main.js ***!</div><div class="line">  \****************************/</div><div class="line"><span class="comment">/*! no static exports found */</span></div><div class="line"><span class="comment">/***/</span> (<span class="function"><span class="keyword">function</span>(<span class="params">module, exports</span>) </span>&#123;</div><div class="line"></div><div class="line"><span class="built_in">eval</span>(<span class="string">"function hello(str) &#123;\n    alert(str);\n&#125;\n\n//# sourceURL=webpack:///./src/script/main.js?"</span>);</div><div class="line"></div><div class="line"><span class="comment">/***/</span> &#125;),</div><div class="line"></div><div class="line"><span class="comment">/***/</span> <span class="number">0</span>:</div><div class="line"><span class="comment">/*!****************************************************!*\</span></div><div class="line">  !*** multi ./src/script/main.js ./src/script/a.js ***!</div><div class="line">  \****************************************************/</div><div class="line"><span class="comment">/*! no static exports found */</span></div><div class="line"><span class="comment">/***/</span> (<span class="function"><span class="keyword">function</span>(<span class="params">module, exports, __webpack_require__</span>) </span>&#123;</div><div class="line"></div><div class="line"><span class="built_in">eval</span>(<span class="string">"__webpack_require__(/*! ./src/script/main.js */\"./src/script/main.js\");\nmodule.exports = __webpack_require__(/*! ./src/script/a.js */\"./src/script/a.js\");\n\n\n//# sourceURL=webpack:///multi_./src/script/main.js_./src/script/a.js?"</span>);</div><div class="line"></div><div class="line"><span class="comment">/***/</span> &#125;)</div><div class="line"></div><div class="line"><span class="comment">/******/</span> &#125;);</div></pre></td></tr></table></figure></p>
<p>可以看到，<code>main.js</code>和<code>a.js</code>都被打包到<code>bundle.js</code>里面了。<br>还有一种多入口的方式，是配置入口对象的方式，这种更适合多页面的应用程序的打包，像这样。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">mode</span>: <span class="string">'development'</span>, <span class="comment">// 打包模式</span></div><div class="line">    <span class="comment">// entry: ['./src/script/main.js', './src/script/a.js'], // 入口</span></div><div class="line">    entry: &#123;</div><div class="line">        <span class="attr">main</span>: <span class="string">'./src/script/main.js'</span>,</div><div class="line">        <span class="attr">a</span>: <span class="string">'./src/script/a.js'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">output</span>: &#123; <span class="comment">// 输出配置</span></div><div class="line">        path: __dirname + <span class="string">"/dist/js"</span>, <span class="comment">// 输出路径</span></div><div class="line">        filename: <span class="string">'bundle.js'</span> <span class="comment">// 输出文件名</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>然后，我们再次打包看下</p>
<p><img src="/imgs/webpack/26.png" alt="Alt text"><br></p>
<p>打包提示错误，错误中提示我们多个单独的chunk打包到了同一个文件<code>bundle.js</code>里面了。怎么办呢？在配置文件里面，应该使用占位符(substitutions)来确保每个文件具有唯一的名称。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">mode</span>: <span class="string">'development'</span>, <span class="comment">// 打包模式</span></div><div class="line">    <span class="comment">// entry: ['./src/script/main.js', './src/script/a.js'], // 入口</span></div><div class="line">    entry: &#123;</div><div class="line">        <span class="attr">main</span>: <span class="string">'./src/script/main.js'</span>,</div><div class="line">        <span class="attr">a</span>: <span class="string">'./src/script/a.js'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">output</span>: &#123; <span class="comment">// 输出配置</span></div><div class="line">        path: __dirname + <span class="string">"/dist/js"</span>, <span class="comment">// 输出路径</span></div><div class="line">        filename: <span class="string">'[name].js'</span> <span class="comment">// 输出文件名</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>再打包看看<br><img src="/imgs/webpack/27.png" alt="Alt text"><br><br>OK，打包成功了，在<code>dist/js/</code>目录下生成了<code>main.js</code>和<code>a.js</code>入口同名文件，文件中分别包含了webpack内部函数和入口对应的代码。对于<code>filename</code>的设置，我们出了使用<code>name</code>占位符，还可以使用<code>hash</code>、<code>chunkhash</code>等来设置。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">mode</span>: <span class="string">'development'</span>, <span class="comment">// 打包模式</span></div><div class="line">    <span class="comment">// entry: ['./src/script/main.js', './src/script/a.js'], // 入口</span></div><div class="line">    entry: &#123;</div><div class="line">        <span class="attr">main</span>: <span class="string">'./src/script/main.js'</span>,</div><div class="line">        <span class="attr">a</span>: <span class="string">'./src/script/a.js'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">output</span>: &#123; <span class="comment">// 输出配置</span></div><div class="line">        path: __dirname + <span class="string">"/dist/js"</span>, <span class="comment">// 输出路径</span></div><div class="line">        <span class="comment">// filename: '[name].[hash].js' // 输出文件名</span></div><div class="line">        filename: <span class="string">'[name].[chunkhash].js'</span> <span class="comment">// 输出文件名</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="/imgs/webpack/28.png" alt="Alt text"><br></p>
<p><code>hash</code>是本次打包的哈希值，<code>chunkhash</code>是每个chunk生成的哈希值。</p>
<h3 id="自动化生产项目中的html页面"><a href="#自动化生产项目中的html页面" class="headerlink" title="自动化生产项目中的html页面"></a>自动化生产项目中的html页面</h3><p>当我们通过占位符来设置输入的文件名的时候，我们又不知道打包好的js文件名称，如何在html引入呢？可以借助webpack的插件来解决这个问题，引入<code>html-webpack-plugin</code>，同样通过<code>npm install</code>进行安装。然后在配置文件<code>webpack.config.js</code>中建立对插件的引用<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> htmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">mode</span>: <span class="string">'development'</span>, <span class="comment">// 打包模式</span></div><div class="line">    <span class="comment">// entry: ['./src/script/main.js', './src/script/a.js'], // 入口</span></div><div class="line">    entry: &#123;</div><div class="line">        <span class="attr">main</span>: <span class="string">'./src/script/main.js'</span>,</div><div class="line">        <span class="attr">a</span>: <span class="string">'./src/script/a.js'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">output</span>: &#123; <span class="comment">// 输出配置</span></div><div class="line">        path: __dirname + <span class="string">"/dist/js"</span>, <span class="comment">// 输出路径</span></div><div class="line">        <span class="comment">// filename: '[name].[hash].js' // 输出文件名</span></div><div class="line">        filename: <span class="string">'[name].[chunkhash].js'</span> <span class="comment">// 输出文件名</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">plugins</span>: [</div><div class="line">        <span class="keyword">new</span> htmlWebpackPlugin()</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>配置好<code>plugins</code>之后，再次打包，可以在<code>dist/js</code>目录中看到新生成的html文件</p>
<p><img src="/imgs/webpack/29.png" alt="Alt text"><br></p>
<p>惊不惊喜！？<code>html-webpack-plugin</code>插件已经帮我们自动生成一个引用了打包后的js的html文件。但是这样的html还不能满足实际中的复杂结构，自定义的需求更大，而且自动生成的<code>index.html</code>没有和我们根目录下的<code>index.html</code>建立任何联系。其实，我们可以给<code>html-webpack-plugin</code>插件在初始化的时候穿参数。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> htmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">mode</span>: <span class="string">'development'</span>, <span class="comment">// 打包模式</span></div><div class="line">    <span class="comment">// entry: ['./src/script/main.js', './src/script/a.js'], // 入口</span></div><div class="line">    entry: &#123;</div><div class="line">        <span class="attr">main</span>: <span class="string">'./src/script/main.js'</span>,</div><div class="line">        <span class="attr">a</span>: <span class="string">'./src/script/a.js'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">output</span>: &#123; <span class="comment">// 输出配置</span></div><div class="line">        path: __dirname + <span class="string">"/dist/js"</span>, <span class="comment">// 输出路径</span></div><div class="line">        <span class="comment">// filename: '[name].[hash].js' // 输出文件名</span></div><div class="line">        filename: <span class="string">'[name].[chunkhash].js'</span> <span class="comment">// 输出文件名</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">plugins</span>: [</div><div class="line">        <span class="keyword">new</span> htmlWebpackPlugin(&#123;</div><div class="line">            <span class="attr">template</span>: <span class="string">'index.html'</span> <span class="comment">// 模版，这里直接用根目录下的index.html</span></div><div class="line">        &#125;)</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>立即打包看看结果<br><img src="/imgs/webpack/30.png" alt="Alt text"><br><br>在自动生成的<code>index.html</code>里面，出了自动引入的两个js之外，还包含模版里面的js的引用，所以可以将模版里面的js引用干掉了。还有一个问题，目前所有文件的输出都在<code>dist/js/</code>目录下，这个如何解决呢？去改改输出配置就可以了。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> htmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">mode</span>: <span class="string">'development'</span>, <span class="comment">// 打包模式</span></div><div class="line">    <span class="comment">// entry: ['./src/script/main.js', './src/script/a.js'], // 入口</span></div><div class="line">    entry: &#123;</div><div class="line">        <span class="attr">main</span>: <span class="string">'./src/script/main.js'</span>,</div><div class="line">        <span class="attr">a</span>: <span class="string">'./src/script/a.js'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">output</span>: &#123; <span class="comment">// 输出配置</span></div><div class="line">        path: __dirname + <span class="string">"/dist/js"</span>, <span class="comment">// 输出路径</span></div><div class="line">        <span class="comment">// filename: '[name].[hash].js' // 输出文件名</span></div><div class="line">        filename: <span class="string">'[name].[chunkhash].js'</span> <span class="comment">// 输出文件名</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">plugins</span>: [</div><div class="line">        <span class="keyword">new</span> htmlWebpackPlugin(&#123;</div><div class="line">            <span class="attr">template</span>: <span class="string">'index.html'</span> <span class="comment">// 模版，这里直接用根目录下的index.html</span></div><div class="line">        &#125;)</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p><img src="/imgs/webpack/31.png" alt="Alt text"><br></p>
<p><code>html-webpack-plugin</code>插件除了可以指定模版，还可以指定文件名，文件名中同输出配置可以使用占位符；甚至可以通过<code>injuct</code>参数指定脚本引入的标签是放在<code>head</code>还是<code>body</code><br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> htmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">mode</span>: <span class="string">'development'</span>, <span class="comment">// 打包模式</span></div><div class="line">    <span class="comment">// entry: ['./src/script/main.js', './src/script/a.js'], // 入口</span></div><div class="line">    entry: &#123;</div><div class="line">        <span class="attr">main</span>: <span class="string">'./src/script/main.js'</span>,</div><div class="line">        <span class="attr">a</span>: <span class="string">'./src/script/a.js'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">output</span>: &#123; <span class="comment">// 输出配置</span></div><div class="line">        path: __dirname + <span class="string">"/dist/js"</span>, <span class="comment">// 输出路径</span></div><div class="line">        <span class="comment">// filename: '[name].[hash].js' // 输出文件名</span></div><div class="line">        filename: <span class="string">'[name].[chunkhash].js'</span> <span class="comment">// 输出文件名</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">plugins</span>: [</div><div class="line">        <span class="keyword">new</span> htmlWebpackPlugin(&#123;</div><div class="line">            <span class="attr">template</span>: <span class="string">'index.html'</span>, <span class="comment">// 模版，这里直接用根目录下的index.html</span></div><div class="line">            <span class="comment">// filename: 'index-[hash].html', // 输出文件名</span></div><div class="line">            inject: <span class="string">'head'</span>,</div><div class="line">            <span class="attr">title</span>: <span class="string">'Hulk Lv Blog'</span></div><div class="line">        &#125;)</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>下面说一下更复杂的需求，要求给模版传参，并引用，比如在<code>index.html</code>中引用title。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">htmlWebpackPlugin.options.title</span> %&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>运行一下打包，可以看下生成的’index.html’<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hulk Lv Blog<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/main.c250d5e450733548d6bd.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/a.fedd8d1ee538e61394d4.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>上面是使用了模版语法，当然还可以在里面使用<code>for</code>循环等语句来实现需求，只需要在<code>&lt;%%&gt;</code>里面书写js语句代码就可以。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">htmlWebpackPlugin.options.title</span> %&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>再次打包<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hulk Lv Blog<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript src="</span><span class="attr">js</span>/<span class="attr">main.c250d5e450733548d6bd.js</span>"&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/main.c250d5e450733548d6bd.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"js/a.fedd8d1ee538e61394d4.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript src="</span><span class="attr">js</span>/<span class="attr">a.fedd8d1ee538e61394d4.js</span>"&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>这下我们模版里面指定的js已经被引入，但是因为之前设置了<code>inject: head</code>，因此<code>&lt;head&gt;</code>标签里面还有自动生成的引用，那么我们直接设置<code>inject</code>为false就可以干掉多余的了，生成如下<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hulk Lv Blog<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript src="</span><span class="attr">js</span>/<span class="attr">main.c250d5e450733548d6bd.js</span>"&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript src="</span><span class="attr">js</span>/<span class="attr">a.fedd8d1ee538e61394d4.js</span>"&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<p>解决完上面的问题之后，在实际开发中，上线后引用的脚本地址一般和开发时候不一样怎么办？下面说下<code>output</code>的<code>publicPath</code>属性。<br>对于按需加载(on-demand-load)或加载外部资源(external resources)（如图片、文件等）来说，<code>output.publicPath</code>是很重要的选项。如果指定了一个错误的值，则在加载这些资源时会收到 404 错误。<br>此选项指定在浏览器中所引用的「此输出目录对应的公开 URL」。相对 URL(relative URL) 会被相对于 HTML 页面（或 <base> 标签）解析。相对于服务的 URL(Server-relative URL)，相对于协议的 URL(protocol-relative URL) 或绝对 URL(absolute URL)也可是可能用到的，或者有时必须用到，例如：当将资源托管到 CDN 时。<br>该选项的值是以 runtime(运行时) 或 loader(载入时) 所创建的每个 URL 为前缀。因此，在多数情况下，此选项的值都会以/结束。默认值是一个空字符串 “”。简单规则如下：<code>output.path</code> 中的 URL 以 HTML 页面为基准。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> htmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">mode</span>: <span class="string">'development'</span>, <span class="comment">// 打包模式</span></div><div class="line">    <span class="comment">// entry: ['./src/script/main.js', './src/script/a.js'], // 入口</span></div><div class="line">    entry: &#123;</div><div class="line">        <span class="attr">main</span>: <span class="string">'./src/script/main.js'</span>,</div><div class="line">        <span class="attr">a</span>: <span class="string">'./src/script/a.js'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">output</span>: &#123; <span class="comment">// 输出配置</span></div><div class="line">        path: __dirname + <span class="string">"/dist/js"</span>, <span class="comment">// 输出路径</span></div><div class="line">        <span class="comment">// filename: '[name].[hash].js' // 输出文件名</span></div><div class="line">        filename: <span class="string">'[name].[chunkhash].js'</span> <span class="comment">// 输出文件名</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">plugins</span>: [</div><div class="line">        <span class="keyword">new</span> htmlWebpackPlugin(&#123;</div><div class="line">            <span class="attr">template</span>: <span class="string">'index.html'</span>, <span class="comment">// 模版，这里直接用根目录下的index.html</span></div><div class="line">            <span class="comment">// filename: 'index-[hash].html', // 输出文件名</span></div><div class="line">            inject: <span class="string">'head'</span>,</div><div class="line">            <span class="attr">title</span>: <span class="string">'Hulk Lv Blog'</span></div><div class="line">        &#125;)</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Hulk Lv Blog<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript src="</span><span class="attr">https:</span>//<span class="attr">cdn.com</span>/<span class="attr">js</span>/<span class="attr">main.2f1c1d515dca0083dca6.js</span>"&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript src="</span><span class="attr">https:</span>//<span class="attr">cdn.com</span>/<span class="attr">js</span>/<span class="attr">a.013c249b581217752fa4.js</span>"&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<p>另外，还可以通过<code>html-webpack-plugin</code>插件的<code>minify</code>属性对<code>index.html</code>进行压缩。<br><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">htmlWebpackPlugin.options.title</span> %&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!--&lt;script type="text/javascript src="&lt;%= htmlWebpackPlugin.files.chunks.main.entry %&gt;"&gt;&lt;/script&gt;--&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="comment">&lt;!--&lt;script type="text/javascript src="&lt;%= htmlWebpackPlugin.files.chunks.a.entry %&gt;"&gt;&lt;/script&gt;--&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> htmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">mode</span>: <span class="string">'development'</span>, <span class="comment">// 打包模式</span></div><div class="line">    <span class="comment">// entry: ['./src/script/main.js', './src/script/a.js'], // 入口</span></div><div class="line">    entry: &#123;</div><div class="line">        <span class="attr">main</span>: <span class="string">'./src/script/main.js'</span>,</div><div class="line">        <span class="attr">a</span>: <span class="string">'./src/script/a.js'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">output</span>: &#123; <span class="comment">// 输出配置</span></div><div class="line">        path: __dirname + <span class="string">"/dist"</span>, <span class="comment">// 输出路径</span></div><div class="line">        <span class="comment">// filename: '[name].[hash].js' // 输出文件名</span></div><div class="line">        filename: <span class="string">'js/[name].[chunkhash].js'</span>, <span class="comment">// 输出文件名</span></div><div class="line">        publicPath: <span class="string">'https://cdn.com/'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">plugins</span>: [</div><div class="line">        <span class="keyword">new</span> htmlWebpackPlugin(&#123;</div><div class="line">            <span class="attr">template</span>: <span class="string">'index.html'</span>, <span class="comment">// 模版，这里直接用根目录下的index.html</span></div><div class="line">            <span class="comment">// filename: 'index-[hash].html', // 输出文件名</span></div><div class="line">            inject: <span class="string">'head'</span>,</div><div class="line">            <span class="comment">// inject: false,</span></div><div class="line">            title: <span class="string">'Hulk Lv Blog'</span>,</div><div class="line">            <span class="attr">minify</span>: &#123;</div><div class="line">                <span class="attr">removeComments</span>: <span class="literal">true</span>,</div><div class="line">                <span class="attr">collapseWhitespace</span>: <span class="literal">true</span></div><div class="line">            &#125;</div><div class="line">        &#125;)</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>经过上面的配置，打包看看</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span><span class="tag">&lt;<span class="name">html</span>&gt;</span><span class="tag">&lt;<span class="name">head</span>&gt;</span><span class="tag">&lt;<span class="name">title</span>&gt;</span>Hulk Lv Blog<span class="tag">&lt;/<span class="name">title</span>&gt;</span><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"https://cdn.com/js/main.2f1c1d515dca0083dca6.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"https://cdn.com/js/a.013c249b581217752fa4.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span><span class="tag">&lt;/<span class="name">head</span>&gt;</span><span class="tag">&lt;<span class="name">body</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="自动化生产项目中的多html页面"><a href="#自动化生产项目中的多html页面" class="headerlink" title="自动化生产项目中的多html页面"></a>自动化生产项目中的多html页面</h3><p>只需要在<code>plugins</code>中配置多个<code>html-webpack-plugin</code>就可以。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> htmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">'html-webpack-plugin'</span>);</div><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">    <span class="attr">mode</span>: <span class="string">'development'</span>, <span class="comment">// 打包模式</span></div><div class="line">    <span class="comment">// entry: ['./src/script/main.js', './src/script/a.js'], // 入口</span></div><div class="line">    entry: &#123;</div><div class="line">        <span class="attr">main</span>: <span class="string">'./src/script/main.js'</span>,</div><div class="line">        <span class="attr">a</span>: <span class="string">'./src/script/a.js'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">output</span>: &#123; <span class="comment">// 输出配置</span></div><div class="line">        path: __dirname + <span class="string">"/dist"</span>, <span class="comment">// 输出路径</span></div><div class="line">        <span class="comment">// filename: '[name].[hash].js' // 输出文件名</span></div><div class="line">        filename: <span class="string">'js/[name].[chunkhash].js'</span>, <span class="comment">// 输出文件名</span></div><div class="line">        publicPath: <span class="string">'https://cdn.com/'</span></div><div class="line">    &#125;,</div><div class="line">    <span class="attr">plugins</span>: [</div><div class="line">        <span class="keyword">new</span> htmlWebpackPlugin(&#123;</div><div class="line">            <span class="attr">template</span>: <span class="string">'index.html'</span>, <span class="comment">// 模版，这里直接用根目录下的index.html</span></div><div class="line">            <span class="comment">// filename: 'index-[hash].html', // 输出文件名</span></div><div class="line">            filename: <span class="string">'index.html'</span>, <span class="comment">// 输出文件名</span></div><div class="line">            inject: <span class="string">'head'</span>,</div><div class="line">            <span class="comment">// inject: false,</span></div><div class="line">            title: <span class="string">'Hulk Lv Blog'</span>,</div><div class="line">            <span class="attr">minify</span>: &#123;</div><div class="line">                <span class="attr">removeComments</span>: <span class="literal">true</span>,</div><div class="line">                <span class="attr">collapseWhitespace</span>: <span class="literal">true</span></div><div class="line">            &#125;</div><div class="line">        &#125;),</div><div class="line">        <span class="keyword">new</span> htmlWebpackPlugin(&#123;</div><div class="line">            <span class="attr">template</span>: <span class="string">'index.html'</span>, <span class="comment">// 模版，这里直接用根目录下的index.html</span></div><div class="line">            filename: <span class="string">'a.html'</span>, <span class="comment">// 输出文件名</span></div><div class="line">            <span class="comment">// filename: 'index-[hash].html', // 输出文件名</span></div><div class="line">            inject: <span class="string">'head'</span>,</div><div class="line">            <span class="comment">// inject: false,</span></div><div class="line">            title: <span class="string">'this is a page'</span></div><div class="line">        &#125;)</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ok，打包看看生成的是什么<br><img src="/imgs/webpack/32.png" alt="Alt text"><br></p>
<p>在输出目录里面生成了两个chunk对应的html文件，都是以<code>index.html</code>为模版，那么如何做到定制化呢，可以通过<code>html-webpack-plugin</code>传参数<code>chunks</code>，在模版中定制不同chunk的不同引用等。</p>
<h3 id="未完待续"><a href="#未完待续" class="headerlink" title="未完待续"></a>未完待续</h3></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2018-11-24</span><i class="fa fa-tag"></i></div></div></div></div><div class="share"><div class="evernote"><a href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank" class="fa fa-bookmark"></a></div><div class="weibo"><a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></div><div class="twitter"><a href="http://twitter.com/home?status=,http://yoursite.com/2018/11/24/webpack入门/,Hulk Lv' Blog,webpack入门,;" class="fa fa-twitter"></a></div></div><div class="pagination"><ul class="clearfix"><li class="next pagbuttons"><a role="navigation" href="/2018/11/24/Git学习/" title="Git学习" class="btn">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>