<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Hulk Lv"><title>Vue.js实战之列表排序 · Hulk Lv' Blog</title><meta name="description" content="目前公司在基于Vue.js做开发，昨天在帮同事看一个提现的功能，页面结构是一个有序的提现方式列表，如下图所示：
列表的展示逻辑是：

每种提现方式分为已绑定和未绑定两种展示状态，如果已绑定，则展示右侧的勾选radio；否则展示向右箭头，以引导用户去绑定相对应的提现方式；
提现方式按照支付宝、微信钱包"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">Hulk Lv' Blog</a></h3></div></div><ul class="social-links"></ul><div class="footer"><a href="https://github.com/xiaojiaolv131">GitHub </a><a href="http://weibo.com/u/1172318487"> WeiBo </a></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/about">关于</a></li><li><a href="/archives">归档</a></li><li><a href="/links">友链</a></li></div><div class="information"><div class="back_btn"><li><a onclick="window.history.go(-1)" class="fa fa-chevron-left"> </a></li></div><div class="avatar"><img></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>Vue.js实战之列表排序</a></h3></div><div class="post-content"><blockquote>
<p>目前公司在基于Vue.js做开发，昨天在帮同事看一个提现的功能，页面结构是一个有序的提现方式列表，如下图所示：<br><img src="/imgs/D760C167-BA96-470C-B9CB-9E82C1D26687.png" alt="Alt text"><br></p>
<p>列表的展示逻辑是：</p>
<ul>
<li>每种提现方式分为已绑定和未绑定两种展示状态，如果已绑定，则展示右侧的勾选radio；否则展示向右箭头，以引导用户去绑定相对应的提现方式；</li>
<li>提现方式按照支付宝、微信钱包、银行卡优先级由高到低的顺序进行展示；</li>
<li>页面初始化时，已绑定的提现方式排在前面，其次按照提现优先级进行排列；</li>
<li>页面初始化时，如果已绑定支付宝，则排在第一（置顶），并且要求默认勾选中；</li>
<li>用户只能选择一种提现方式，且勾选可以被取消；</li>
<li>用户点击未绑定的提现方式右侧箭头去绑定完成，并返回到该页面后，需要将刚刚绑定好的提现方式置顶，并勾选。</li>
</ul>
</blockquote>
<h2 id="简单介绍一下Vue-js"><a href="#简单介绍一下Vue-js" class="headerlink" title="简单介绍一下Vue.js"></a>简单介绍一下Vue.js</h2><h3 id="什么是Vue-js"><a href="#什么是Vue-js" class="headerlink" title="什么是Vue.js"></a>什么是Vue.js</h3><p>Vue.js官网描述：Vue.js（读音 /vjuː/, 类似于 view）是一个构建数据驱动的 web 界面的库。Vue.js 的目标是通过尽可能简单的 API 实现响应的数据绑定和组合的视图组件。</p>
<h3 id="响应的数据绑定"><a href="#响应的数据绑定" class="headerlink" title="响应的数据绑定"></a>响应的数据绑定</h3><p>Vue.js 的核心是一个响应的数据绑定系统，它让数据与 DOM 保持同步非常简单。在使用 jQuery 手工操作 DOM 时，我们的代码常常是命令式的、重复的与易错的。Vue.js 拥抱数据驱动的视图概念。通俗地讲，它意味着我们在普通 HTML 模板中使用特殊的语法将 DOM “绑定”到底层数据。一旦创建了绑定，DOM 将与数据保持同步。每当修改了数据，DOM 便相应地更新。这样我们应用中的逻辑就几乎都是直接修改数据了，不必与 DOM 更新搅在一起。这让我们的代码更容易撰写、理解与维护。如图：<br><img src="http://v1-cn.vuejs.org/images/mvvm.png" alt="Alt text"><br></p>
<p>OK！通过以上内容，我们可以对Vue.js有个整体的了解了，使用Vue.js我们可以通过操作Data数据来驱动DOM，避免了繁琐复杂的操作DOM文档去实现页面的渲染，但在这里我们暂且先不去研究它是如果实现数据的双向绑定的，我们在这里主要来看看如何操作Data数据来更好的完成DOM的渲染，来不及解释！赶紧上车～</p>
<h2 id="开始行动"><a href="#开始行动" class="headerlink" title="开始行动"></a>开始行动</h2><h3 id="先来看静态页面"><a href="#先来看静态页面" class="headerlink" title="先来看静态页面"></a>先来看静态页面</h3><p>仅仅一个列表而已：<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">&lt;ul class="mod-label-listwrap mod-com-list addwd-list"&gt;</div><div class="line">    &lt;li class="checked"&gt;</div><div class="line">        &lt;label class="mod-label"&gt;&lt;span class="wd-icons-wx"&gt;&lt;/span&gt;&lt;/label&gt;</div><div class="line">        &lt;div class="mod-cont"&gt;</div><div class="line">            &lt;h3 class="addwd-tit"&gt;微信钱包 &lt;i class="wd-tag-forthwith"&gt;即时&lt;/i&gt;&lt;/h3&gt;</div><div class="line">            &lt;h4 class="addwd-txt"&gt;Hulk Lv&lt;/h4&gt;</div><div class="line">            &lt;span class="optr checkbox-wd checkType"&gt;&lt;/span&gt;</div><div class="line">        &lt;/div&gt;</div><div class="line">    &lt;/li&gt;</div><div class="line">    &lt;li&gt;</div><div class="line">        &lt;label class="mod-label"&gt;&lt;span class="wd-icons-zhifubao"&gt;&lt;/span&gt;&lt;/label&gt;</div><div class="line">        &lt;div class="mod-cont"&gt;</div><div class="line">            &lt;h3 class="addwd-tit"&gt;支付宝&lt;/h3&gt;</div><div class="line">            &lt;h4 class="addwd-txt"&gt;12492389743&lt;/h4&gt;</div><div class="line">            &lt;span class="optr checkbox-wd checkType"&gt;&lt;/span&gt;</div><div class="line">        &lt;/div&gt;</div><div class="line">    &lt;/li&gt;</div><div class="line">    &lt;li&gt;</div><div class="line">        &lt;label class="mod-label"&gt;&lt;span class="wd-icons-yinhang"&gt;&lt;/span&gt;&lt;/label&gt;</div><div class="line">        &lt;div class="mod-cont"&gt;</div><div class="line">            &lt;h3 class="addwd-tit"&gt;中国工商银行&lt;/h3&gt;</div><div class="line">            &lt;h4 class="addwd-txt"&gt;尾号1234&lt;/h4&gt;</div><div class="line">            &lt;span class="optr checkbox-wd checkType"&gt;&lt;/span&gt;</div><div class="line">        &lt;/div&gt;</div><div class="line">    &lt;/li&gt;</div><div class="line">&lt;/ul&gt;</div></pre></td></tr></table></figure></p>
<p>即已绑定的视图如下图：<br><img src="/imgs/9C9B6886-430E-413A-9C88-4D0572890BBE.png" alt="Alt text"><br><br>未绑定的样子长这样：<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div></pre></td><td class="code"><pre><div class="line">&lt;ul class="mod-label-listwrap mod-com-list addwd-list"&gt;</div><div class="line">    &lt;li class="mod-li-arr"&gt;</div><div class="line">        &lt;label class="mod-label"&gt;&lt;span class="wd-icons-zhifubao"&gt;&lt;/span&gt;&lt;/label&gt;</div><div class="line">        &lt;div class="mod-cont"&gt;</div><div class="line">            &lt;h3 class="addwd-tit"&gt;支付宝&lt;/h3&gt;</div><div class="line">            &lt;h4 class="addwd-txt"&gt;未绑定&lt;/h4&gt;</div><div class="line">            &lt;i class="mod-arr"&gt;&lt;/i&gt;</div><div class="line">        &lt;/div&gt;</div><div class="line">    &lt;/li&gt;</div><div class="line">    &lt;li class="mod-li-arr"&gt;</div><div class="line">        &lt;label class="mod-label"&gt;&lt;span class="wd-icons-wx"&gt;&lt;/span&gt;&lt;/label&gt;</div><div class="line">        &lt;div class="mod-cont"&gt;</div><div class="line">            &lt;h3 class="addwd-tit"&gt;微信钱包&lt;/h3&gt;</div><div class="line">            &lt;h4 class="addwd-txt"&gt;未绑定&lt;/h4&gt;</div><div class="line">            &lt;i class="mod-arr"&gt;&lt;/i&gt;</div><div class="line">        &lt;/div&gt;</div><div class="line">    &lt;/li&gt;</div><div class="line">    &lt;li class="mod-li-arr"&gt;</div><div class="line">        &lt;label class="mod-label"&gt;&lt;span class="wd-icons-yinhang"&gt;&lt;/span&gt;&lt;/label&gt;</div><div class="line">        &lt;div class="mod-cont"&gt;</div><div class="line">            &lt;h3 class="addwd-tit"&gt;银行卡&lt;/h3&gt;</div><div class="line">            &lt;h4 class="addwd-txt"&gt;未绑定&lt;/h4&gt;</div><div class="line">            &lt;i class="mod-arr"&gt;&lt;/i&gt;</div><div class="line">        &lt;/div&gt;</div><div class="line">    &lt;/li&gt;</div><div class="line">&lt;/ul&gt;</div></pre></td></tr></table></figure></p>
<p>即未绑定的视图如下图：<br><img src="/imgs/5EBF9902-D655-440B-A829-0EA51A5362D0.png" alt="Alt text"><br></p>
<h3 id="谋划一个实现思路"><a href="#谋划一个实现思路" class="headerlink" title="谋划一个实现思路"></a>谋划一个实现思路</h3><h4 id="第一步，如何用Vue-js精简的渲染列表"><a href="#第一步，如何用Vue-js精简的渲染列表" class="headerlink" title="第一步，如何用Vue.js精简的渲染列表"></a>第一步，如何用Vue.js精简的渲染列表</h4><p>用Vue.js来实现的话，就是要合理将data利用起来啦，尽量少操作或者干脆不要手动去操作DOM，否则都算不上一个正儿八经儿的Vue.js应用。既然视图是一列表，那么我们从服务端拿到的数据自然是一个对象数组，就像这样儿：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">applyCashList: [</div><div class="line">    &#123;</div><div class="line">        <span class="attr">type</span>: <span class="string">'yihang'</span>, <span class="comment">//提现方式</span></div><div class="line">        checked: <span class="literal">false</span>, <span class="comment">//是否选中</span></div><div class="line">        account: <span class="string">'234234234234'</span> <span class="comment">//账户</span></div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        <span class="attr">type</span>: <span class="string">'weixin'</span>, </div><div class="line">        <span class="attr">checked</span>: <span class="literal">false</span>, </div><div class="line">        <span class="attr">account</span>: <span class="string">'Hulk Lv'</span></div><div class="line">    &#125;,</div><div class="line">    &#123;</div><div class="line">        <span class="attr">type</span>: <span class="string">'zhifubao'</span>, </div><div class="line">        <span class="attr">checked</span>: <span class="literal">false</span>, </div><div class="line">        <span class="attr">account</span>: <span class="string">''</span></div><div class="line">    &#125;</div><div class="line">]</div></pre></td></tr></table></figure></p>
<p>以上这个对象数组是我们能够用得上的资源之一。那么我们开始分析DOM结构，将可以作为数据驱动的部分抽离出来，比如：</p>
<ul>
<li>什么时候选中<code>&lt;li class=&quot;checked&quot;&gt;</code></li>
<li>每项提现方式左侧的图标是哪个<code>&lt;span class=&quot;wd-icons-wx&quot;&gt;</code>或者<code>&lt;span class=&quot;wd-icons-zhifubao&quot;&gt;</code>或者<code>&lt;span class=&quot;wd-icons-yinhang&quot;&gt;</code></li>
<li>提现方式的名称是什么<code>&lt;h3 class=&quot;addwd-tit&quot;&gt;支付宝/微信钱包/银行卡&lt;/h3&gt;</code></li>
<li>账户是什么<code>&lt;h4 class=&quot;addwd-txt&quot;&gt;未绑定/账户&lt;/h4&gt;</code></li>
<li>每项提现方式右侧显示什么<code>&lt;span class=&quot;optr checkbox-wd checkType&quot;&gt;&lt;/span&gt;</code>（勾选按钮）或者<code>&lt;i class=&quot;mod-arr&quot;&gt;&lt;/i&gt;</code>（向右箭头）</li>
</ul>
<p>经过上面的分析，可以想到，单单拿着服务端返回的对象数组，不能满足我们完全使用数据驱动DOM的目的，我们还需要设计一个数据对象来控制class，像这样儿：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">classObj: &#123;</div><div class="line">    <span class="attr">zhifubao</span>: &#123;<span class="attr">span_class</span>: <span class="string">'zhifubao'</span>, <span class="attr">caption</span>: <span class="string">'支付宝'</span>&#125;,</div><div class="line">    <span class="attr">weixin</span>: &#123;<span class="attr">span_class</span>: <span class="string">'wx'</span>, <span class="attr">caption</span>: <span class="string">'微信钱包'</span>&#125;,</div><div class="line">    <span class="attr">yinhang</span>: &#123;<span class="attr">span_class</span>: <span class="string">'yinhang'</span>, <span class="attr">caption</span>: <span class="string">'银行卡'</span>&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>其实，这样做等于将服务端返回的对象数组与classObj建立起一种映射关系，方便我们自由的控制DOM，然后，我们可以把DOM精简成这样了：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&lt;template&gt;</div><div class="line">    <span class="xml"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">class</span>=<span class="string">"mod-label-listwrap mod-com-list addwd-list"</span>&gt;</span></span></div><div class="line">        <span class="tag">&lt;<span class="name">template</span> <span class="attr">v-for</span>=<span class="string">"item in applyCashList"</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">li</span> <span class="attr">:class</span>=<span class="string">"&#123;checked: item.checked&#125;"</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">label</span> <span class="attr">class</span>=<span class="string">"mod-label"</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">:class</span>=<span class="string">"'wd-icons-' + classObj[item.type].span_class"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;/<span class="name">label</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"mod-cont"</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">h3</span> <span class="attr">class</span>=<span class="string">"addwd-tit"</span>&gt;</span>&#123;&#123;classObj[item.type].caption&#125;&#125;<span class="tag">&lt;<span class="name">i</span> <span class="attr">v-if</span>=<span class="string">"item.type == 'weixin'"</span> <span class="attr">class</span>=<span class="string">"wd-tag-forthwith"</span>&gt;</span>即时<span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">h3</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">h4</span> <span class="attr">class</span>=<span class="string">"addwd-txt"</span>&gt;</span>&#123;&#123;item.account == ''? '未绑定' : item.account&#125;&#125;<span class="tag">&lt;/<span class="name">h4</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">v-if</span>=<span class="string">"item.account != ''"</span> <span class="attr">class</span>=<span class="string">"optr checkbox-wd checkType"</span> @<span class="attr">click</span>=<span class="string">"checkFn($index)"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">i</span> <span class="attr">v-else</span> <span class="attr">class</span>=<span class="string">"mod-arr"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">template</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line">&lt;<span class="regexp">/template&gt;</span></div></pre></td></tr></table></figure>
<p>有没有一种减肥成功的感觉！关于这里的v-for、v-if、v-else以及:class指令，我们在这里就不多说了，到目前为止，提现方式列表视图完全由数据驱动了，不过这只是第一步，根据需求，我们还需要正确的渲染不同情况下的列表排序和勾选状态。</p>
<h4 id="第二步，如何实现列表的展示逻辑"><a href="#第二步，如何实现列表的展示逻辑" class="headerlink" title="第二步，如何实现列表的展示逻辑"></a>第二步，如何实现列表的展示逻辑</h4><p>如果忘了逻辑是啥，请奋力的捣到最顶部再瞅瞅～<br>首先，这三种提现方式是有优先级的；其次，要分两种情况对待了，一种是页面初始化的时候：看谁绑了，绑了的优先，另外，没绑的也不能乱排，是有优先级的呦～，还有就是如果支付宝被绑了，除了要置顶，还要默认被勾选！；另一种是用户点击未绑定的提现方式右侧箭头去绑定完成，并返回到该页面后，需要将刚刚绑定好的提现方式置顶，并勾选（这时候，谁刚刚被绑，谁老大了！）。<br>既然，这仨有优先级，不妨给我们的可用资源加上优先级属性，像这样儿：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">classObj: &#123;</div><div class="line">    <span class="attr">zhifubao</span>: &#123;<span class="attr">span_class</span>: <span class="string">'zhifubao'</span>, <span class="attr">caption</span>: <span class="string">'支付宝'</span>, <span class="attr">level</span>: <span class="number">1</span>&#125;,</div><div class="line">    <span class="attr">weixin</span>: &#123;<span class="attr">span_class</span>: <span class="string">'wx'</span>, <span class="attr">caption</span>: <span class="string">'微信钱包'</span>, <span class="attr">level</span>: <span class="number">2</span>&#125;,</div><div class="line">    <span class="attr">yinhang</span>: &#123;<span class="attr">span_class</span>: <span class="string">'yinhang'</span>, <span class="attr">caption</span>: <span class="string">'银行卡'</span>, <span class="attr">level</span>: <span class="number">3</span>&#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这样儿有什么用呢，咱接着看。根据展示逻辑，我们可以写出如下的方法：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line">init ()&#123;</div><div class="line">    <span class="keyword">let</span> self = <span class="keyword">this</span>;</div><div class="line">    self.sortByAccount();</div><div class="line">&#125;,</div><div class="line"></div><div class="line">sortByAccount() &#123;</div><div class="line">    <span class="keyword">let</span> self = <span class="keyword">this</span>;</div><div class="line">    <span class="comment">//1、找出已经绑定的提现方式</span></div><div class="line">    <span class="keyword">let</span> hasAccountArr = self.applyCashList.filter(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">return</span> !!item.account &amp;&amp; item.account != <span class="string">''</span>;</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    <span class="comment">//2、根据不同情况来做不同的排序处理</span></div><div class="line">    <span class="keyword">if</span> (hasAccountArr.length == <span class="number">0</span> || hasAccountArr.length == <span class="number">3</span>) &#123;</div><div class="line">        <span class="comment">//直接按照优先级排序</span></div><div class="line">        self.applyCashList = self.applyCashList.sort(<span class="function">(<span class="params">item1, item2</span>) =&gt;</span> &#123;</div><div class="line">            <span class="keyword">return</span> self.classObj[item1.type].level - self.classObj[item2.type].level;</div><div class="line">        &#125;);</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (hasAccountArr.length == <span class="number">1</span>) &#123;</div><div class="line">        <span class="keyword">let</span> hasNoAccountArr = self.applyCashList.filter(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</div><div class="line">            <span class="keyword">return</span> !item.account ||item.account == <span class="string">''</span>;</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">//对未绑定的那俩按照优先级进行排序</span></div><div class="line">        <span class="keyword">let</span> ordered = hasNoAccountArr.sort(<span class="function">(<span class="params">item1, item2</span>) =&gt;</span> &#123;</div><div class="line">            <span class="keyword">return</span> self.classObj[item1.type].level - self.classObj[item2.type].level;</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">//合并已绑定和未绑定</span></div><div class="line">        self.applyCashList = hasAccountArr.concat(ordered);</div><div class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (hasAccountArr.length == <span class="number">2</span>) &#123;</div><div class="line">        <span class="keyword">let</span> lastItem = self.applyCashList.filter(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</div><div class="line">            <span class="keyword">return</span> !item.account ||item.account == <span class="string">''</span>;</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">//对已绑定的那俩按照优先级进行排序</span></div><div class="line">        <span class="keyword">let</span> ordered = hasAccountArr.sort(<span class="function">(<span class="params">item1, item2</span>) =&gt;</span> &#123;</div><div class="line">            <span class="keyword">return</span> self.classObj[item1.type].level - self.classObj[item2.type].level;</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">//合并已绑定和未绑定</span></div><div class="line">        self.applyCashList = ordered.concat(lastItem);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//3、如果首项已绑定,且是支付宝，则勾选</span></div><div class="line">    <span class="keyword">if</span> (self.applyCashList[<span class="number">0</span>].account != <span class="string">''</span> &amp;&amp; self.applyCashList[<span class="number">0</span>].type == <span class="string">'zhifubao'</span>) &#123;</div><div class="line">        self.applyCashList[<span class="number">0</span>].checked = <span class="literal">true</span>;</div><div class="line">        self.applyCashList[<span class="number">1</span>].checked = <span class="literal">false</span>;<span class="comment">//当然只有一个可以被选中喽！我只是陪衬</span></div><div class="line">        self.applyCashList[<span class="number">2</span>].checked = <span class="literal">false</span>;<span class="comment">//当然只有一个可以被选中喽！我只是陪衬</span></div><div class="line">    &#125;</div><div class="line">&#125;,</div><div class="line"><span class="comment">//勾选按钮点击事件</span></div><div class="line">checkFn (index) &#123;</div><div class="line">    <span class="keyword">let</span> self = <span class="keyword">this</span>;</div><div class="line">    <span class="keyword">if</span> (!self.applyCashList[index].checked) &#123;</div><div class="line">        <span class="keyword">let</span> currentCheckedIndex = <span class="number">-1</span>;</div><div class="line">        <span class="keyword">let</span> temp = self.applyCashList.filter(<span class="function">(<span class="params">item, i, arr</span>) =&gt;</span> &#123;</div><div class="line">            <span class="keyword">if</span> (item.checked) &#123;</div><div class="line">                currentCheckedIndex = i;</div><div class="line">                <span class="keyword">return</span> <span class="literal">true</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;);</div><div class="line">        <span class="keyword">if</span> (currentCheckedIndex &gt; <span class="number">-1</span>) &#123;</div><div class="line">            self.applyCashList[currentCheckedIndex].checked = <span class="literal">false</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    self.applyCashList[index].checked = !self.applyCashList[index].checked;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这里需要说明的是，我们将这仨提现方式手起刀落分成两部分，一部分是已绑定的方式，另一部分是未绑定的方式，这样做可以对需要被排序的那部分按照优先级来排序，也就是如果只有它自己，还排个毛线，两个、三个就不一样了，当然要比一比了。注释里面已经写的很清楚了，如果有好的方法，当然希望可以拿来说说。<br>到这里，我们已经实现了页面初始化时，列表的排列和默认勾选逻辑，那用户刚刚绑定成功返回到该页面时的逻辑呢？这里我们先草率的抛开绑定过程，以及页面跳转回来的过程，只将关注点锁定到当前这个列表页面，也就是说当我们在对列表排序之前，先要判断入口来源，才能确定要请谁当老大（即要哪种提现方式置顶并默认勾选），所以就有了下面的代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line">init ()&#123;</div><div class="line">    <span class="keyword">let</span> self = <span class="keyword">this</span>;</div><div class="line">    <span class="keyword">let</span> <span class="keyword">from</span> = <span class="string">'init'</span>;<span class="comment">//入口来源 init表示页面初始化，bind表示刚刚绑定完返回</span></div><div class="line">    <span class="keyword">let</span> type = <span class="string">'yinhang'</span>;<span class="comment">//刚刚绑定完的提现方式。我是老大！</span></div><div class="line"></div><div class="line">    <span class="keyword">if</span> (<span class="keyword">from</span> == <span class="string">'bind'</span>) &#123;</div><div class="line">        self.classObj[type].level = <span class="number">-1</span>;<span class="comment">//将优先级调到最高</span></div><div class="line">    &#125;</div><div class="line">    self.sortByAccount(<span class="keyword">from</span>);</div><div class="line">&#125;,</div><div class="line"></div><div class="line">sortByAccount(<span class="keyword">from</span>) &#123;</div><div class="line">    <span class="keyword">let</span> self = <span class="keyword">this</span>;</div><div class="line">    <span class="comment">//1、找出已经绑定的提现方式</span></div><div class="line">    <span class="keyword">let</span> hasAccountArr = self.applyCashList.filter(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</div><div class="line">        <span class="keyword">return</span> !!item.account &amp;&amp; item.account != <span class="string">''</span>;</div><div class="line">    &#125;);</div><div class="line"></div><div class="line">    <span class="comment">//2、根据不同情况来做不同的排序处理</span></div><div class="line">    <span class="keyword">if</span> (hasAccountArr.length == <span class="number">0</span> || hasAccountArr.length == <span class="number">3</span>) &#123;</div><div class="line">        <span class="comment">//直接按照优先级排序</span></div><div class="line">        self.applyCashList = self.applyCashList.sort(<span class="function">(<span class="params">item1, item2</span>) =&gt;</span> &#123;</div><div class="line">            <span class="keyword">return</span> self.classObj[item1.type].level - self.classObj[item2.type].level;</div><div class="line">        &#125;);</div><div class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (hasAccountArr.length == <span class="number">1</span>) &#123;</div><div class="line">        <span class="keyword">let</span> hasNoAccountArr = self.applyCashList.filter(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</div><div class="line">            <span class="keyword">return</span> !item.account ||item.account == <span class="string">''</span>;</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">//对未绑定的那俩按照优先级进行排序</span></div><div class="line">        <span class="keyword">let</span> ordered = hasNoAccountArr.sort(<span class="function">(<span class="params">item1, item2</span>) =&gt;</span> &#123;</div><div class="line">            <span class="keyword">return</span> self.classObj[item1.type].level - self.classObj[item2.type].level;</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">//合并已绑定和未绑定</span></div><div class="line">        self.applyCashList = hasAccountArr.concat(ordered);</div><div class="line">    &#125;<span class="keyword">else</span> <span class="keyword">if</span> (hasAccountArr.length == <span class="number">2</span>) &#123;</div><div class="line">        <span class="keyword">let</span> lastItem = self.applyCashList.filter(<span class="function">(<span class="params">item</span>) =&gt;</span> &#123;</div><div class="line">            <span class="keyword">return</span> !item.account ||item.account == <span class="string">''</span>;</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">//对已绑定的那俩按照优先级进行排序</span></div><div class="line">        <span class="keyword">let</span> ordered = hasAccountArr.sort(<span class="function">(<span class="params">item1, item2</span>) =&gt;</span> &#123;</div><div class="line">            <span class="keyword">return</span> self.classObj[item1.type].level - self.classObj[item2.type].level;</div><div class="line">        &#125;);</div><div class="line">        <span class="comment">//合并已绑定和未绑定</span></div><div class="line">        self.applyCashList = ordered.concat(lastItem);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">//3、如果首项已绑定,且是支付宝或者是刚刚绑完，则勾选</span></div><div class="line">    <span class="keyword">if</span> (self.applyCashList[<span class="number">0</span>].account != <span class="string">''</span> &amp;&amp; (self.applyCashList[<span class="number">0</span>].type == <span class="string">'zhifubao'</span> || <span class="keyword">from</span> == <span class="string">'bind'</span>)) &#123;</div><div class="line">        self.applyCashList[<span class="number">0</span>].checked = <span class="literal">true</span>;</div><div class="line">        self.applyCashList[<span class="number">1</span>].checked = <span class="literal">false</span>;<span class="comment">//当然只有一个可以被选中喽！我只是陪衬</span></div><div class="line">        self.applyCashList[<span class="number">2</span>].checked = <span class="literal">false</span>;<span class="comment">//当然只有一个可以被选中喽！我只是陪衬</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>怎么样，是不是很好玩？！<br>以上简述排序这段，只是关注如何实现列表的展示逻辑，重在回答问题的思路，并没有什么特别高级的方法方式，不过通过这段逻辑，我们可以看到操作数据比操作DOM要简单的多，且代码简洁的多，少了各种DOM属性的定义，少了各种选择器的套用，可以安静的玩玩数据，其他的先不操心了。</p>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2017-06-06</span><i class="fa fa-tag"></i><a href="/tags/Vue-js/" title="Vue.js" class="tag">Vue.js </a></div></div></div></div><div class="share"><div class="evernote"><a href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank" class="fa fa-bookmark"></a></div><div class="weibo"><a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></div><div class="twitter"><a href="http://twitter.com/home?status=,http://yoursite.com/2017/06/06/Vue-js实战之有序列表的展示/,Hulk Lv' Blog,Vue.js实战之列表排序,;" class="fa fa-twitter"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a role="navigation" href="/2017/06/14/浏览器缓存机制/" title="浏览器缓存机制" class="btn">上一篇</a></li><li class="next pagbuttons"><a role="navigation" href="/2017/06/04/学习Vuex框架原理/" title="学习Vuex框架原理" class="btn">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>